<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Linux笔记 - 路远</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="BPDBSIR"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="BPDBSIR"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Linux应用领域 Linux下部署项目Java EE 大数据 Python PHP C&amp;#x2F;C++ GO"><meta property="og:type" content="blog"><meta property="og:title" content="Linux笔记"><meta property="og:url" content="https://xiaoyes.cn/post/2022-05-01-linux/"><meta property="og:site_name" content="路远"><meta property="og:description" content="Linux应用领域 Linux下部署项目Java EE 大数据 Python PHP C&amp;#x2F;C++ GO"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2021/png/12375174/1632012253696-3c68ee86-b9a0-4daf-b4f3-4d8ed440efaa.png#clientId=u65bb31da-3899-4&amp;from=paste&amp;height=209&amp;id=u5e4d5b84&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=418&amp;originWidth=1089&amp;originalType=binary&amp;ratio=1&amp;size=174074&amp;status=done&amp;style=none&amp;taskId=u26bc3022-0a88-4e47-aa51-eb774326cc9&amp;width=544.5"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2021/jpeg/12375174/1632471954323-314c90f8-2b9c-4799-8b3c-95ee4d57a74d.jpeg"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2021/jpeg/12375174/1632491059243-433f5cfc-8531-47cd-b01e-bde05bbb71c5.jpeg"><meta property="article:published_time" content="2022-04-30T16:00:00.000Z"><meta property="article:modified_time" content="2023-04-21T02:56:46.826Z"><meta property="article:author" content="路远"><meta property="article:tag" content="Linux"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://cdn.nlark.com/yuque/0/2021/png/12375174/1632012253696-3c68ee86-b9a0-4daf-b4f3-4d8ed440efaa.png#clientId=u65bb31da-3899-4&amp;from=paste&amp;height=209&amp;id=u5e4d5b84&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=418&amp;originWidth=1089&amp;originalType=binary&amp;ratio=1&amp;size=174074&amp;status=done&amp;style=none&amp;taskId=u26bc3022-0a88-4e47-aa51-eb774326cc9&amp;width=544.5"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://xiaoyes.cn/post/2022-05-01-linux/"},"headline":"Linux笔记","image":[],"datePublished":"2022-04-30T16:00:00.000Z","dateModified":"2023-04-21T02:56:46.826Z","author":{"@type":"Person","name":"路远"},"publisher":{"@type":"Organization","name":"路远","logo":{"@type":"ImageObject","url":"https://xiaoyes.cn/img/logo.svg"}},"description":"Linux应用领域 Linux下部署项目Java EE 大数据 Python PHP C&#x2F;C++ GO"}</script><link rel="canonical" href="https://xiaoyes.cn/post/2022-05-01-linux/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const $tabMenu = document.querySelector(`a[href="${location.hash}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(location.hash);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="路远" style="width: 32px;height: 32px"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/luyuan2002"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-04-30T16:00:00.000Z" title="2022/5/1 00:00:00">2022-05-01</time>发表</span><span class="level-item"><a class="link-muted" href="/categories/Linux/">Linux</a></span><span class="level-item">2 小时读完 (大约16853个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">Linux笔记</h1><div class="content"><h2 id="Linux应用领域"><a href="#Linux应用领域" class="headerlink" title="Linux应用领域"></a>Linux应用领域</h2><ul>
<li><p>Linux下部署项目<br>Java EE 大数据 Python PHP C/C++ GO</p>
<span id="more"></span></li>
<li><p>Linux运维工程师</p>
</li>
<li><p>Linux嵌入式工程师</p>
</li>
<li><p>个人桌面领域的应用</p>
</li>
<li><p>服务器领域<br>linux在服务器领域的应用时最强的<br>linux免费、稳定、高校等特点在这里得到了很好的体现，尤其在一些高端领域尤为广泛</p>
</li>
<li><p>嵌入式领域<br>机顶盒、数字电视、网络电话、程控交换机、手机、PDA、智能家居</p>
</li>
</ul>
<h2 id="Linux概述"><a href="#Linux概述" class="headerlink" title="Linux概述"></a>Linux概述</h2><p>如何读？黎纽克斯</p>
<p>linux时一个操作系统，我们使用的过程中都会用到做应用的部署</p>
<p>常见的操作系统 Windows、IOS、Windows、Android、MacOS、Linux</p>
<p>吉祥物？企鹅</p>
<h2 id="VMware虚拟机安装"><a href="#VMware虚拟机安装" class="headerlink" title="VMware虚拟机安装"></a>VMware虚拟机安装</h2><h2 id="CentOS7-X安装"><a href="#CentOS7-X安装" class="headerlink" title="CentOS7.X安装"></a>CentOS7.X安装</h2><h2 id="网络连接的三种模式"><a href="#网络连接的三种模式" class="headerlink" title="网络连接的三种模式"></a>网络连接的三种模式</h2><h3 id="桥接模式"><a href="#桥接模式" class="headerlink" title="桥接模式"></a>桥接模式</h3><h3 id="NAT模式"><a href="#NAT模式" class="headerlink" title="NAT模式"></a>NAT模式</h3><h3 id="XX模式"><a href="#XX模式" class="headerlink" title="XX模式"></a>XX模式</h3><h2 id="虚拟机克隆"><a href="#虚拟机克隆" class="headerlink" title="虚拟机克隆"></a>虚拟机克隆</h2><p>如果你已经安装了一台linux操作系统，你还想要更多的，没有必要在重新安装，你只需要克隆就可以了</p>
<ul>
<li>方式一：直接拷贝一份安装好的虚拟机文件</li>
<li>方式二：使用vmware的克隆操作</li>
<li>注意，克隆时，需要先关闭linux系统</li>
</ul>
<h2 id="虚拟机快照"><a href="#虚拟机快照" class="headerlink" title="虚拟机快照"></a>虚拟机快照</h2><p>如果你在使用虚拟机操作的时候，你想回到原先的某一个状态，也就是说你担心可能有些失误的操作造成系统异常，需要回到原先某个正常运行的状态，wmare也提供了这样的功能，就叫快照管理。</p>
<ul>
<li>安装好系统之后，先做一个快照A</li>
<li>进入到系统，创建一个文件夹，在保存一个快照B</li>
<li>回到系统刚刚安装好的状态，即 快照A</li>
<li>试试看，是否还能再次回到快照B</li>
</ul>
<h2 id="虚拟机的迁移和删除"><a href="#虚拟机的迁移和删除" class="headerlink" title="虚拟机的迁移和删除"></a>虚拟机的迁移和删除</h2><p>虚拟系统安装好了，它的本质就是文件(访问文件夹的)，英雌虚拟系统的迁移很方便，你可以把安装好的虚拟系统这个文件夹整体拷贝u哦这剪切到另外位置使用，删除也很简单，使用wmare进行移除，在点击菜单 =&gt; 从磁盘删除即刻，或者直接手动删除虚拟系统对应的文件夹即可。</p>
<h2 id="vmtools"><a href="#vmtools" class="headerlink" title="vmtools"></a>vmtools</h2><p>vmtools安装后，可以让我们在windows下更好的管理虚拟机</p>
<p>可以设置windows和centos的共享文件夹</p>
<p>安装vmtools的步骤</p>
<ul>
<li>进入centos</li>
<li>点击vm菜单的 =&gt; instakk wmware tools</li>
<li>centos会出现一个vm的安装包，xx.tar.gz</li>
<li>拷贝到/opt</li>
<li>使用解压命名tar，得到一个安装文件 cd /opt 进入到opt目录  tar -zxvg xx.tar.gz</li>
<li>使用该vm解压的目录，/opt目录下</li>
<li>安装./vmware-install.pl</li>
<li>全部使用默认设置即可，就可以安装成功</li>
<li>注意：安装vmtools，需要有gcc</li>
</ul>
<h2 id="Linux目录结构"><a href="#Linux目录结构" class="headerlink" title="Linux目录结构"></a>Linux目录结构</h2><ul>
<li>Linux的文件i系统采用该层级方式的目录结构，在此结果中最上层时根目录，然后子啊此目录下在创建其他目录</li>
<li>深刻理解linux树状目录时非常重要的</li>
<li>在linux的世界里，一些皆为文件</li>
</ul>
<p><strong>目录结构：</strong></p>
<ul>
<li>root root用户用到的文件 一般的用户进入不到此文件夹</li>
<li>boot 启动系统的核心文件，如果把这个文件夹删除，则系统会无法启动</li>
<li>dev 设备管理器 linux会将硬件映射成一个文件来管理</li>
<li>home 系统中所有的用户 比如  有一个用户andu 则/home/andu就有此文件夹</li>
<li>bin 存放常用的命令</li>
<li>sbin Super Bin 存在的时管理员使用的系统管理程序</li>
<li>etc 所有的系统管理所需要的配置我呢见和子目录 my.conf</li>
<li>lib 系统卡机所需要最基本的动态连接共享库</li>
<li>usr 用户的横夺应用程序和文件都放在这个目录下，类似于Windows下的Program Files目录下</li>
<li>proc 虚拟目录，它是系统内存的映射， 访问这个目录来获取系统信息</li>
<li>srv server做些，该目录存在一些服务启动之后需要提取的数据</li>
<li>sys 这是linux2.6内核的一个很大的变化，该目录下安装了2.6内核中新出现的一个文件系统sysfs</li>
<li>tmp 存在一些临时文件的</li>
<li>media linux系统会自动识别一些设备，例如U盘、、光驱、当识别后，linux会把识别的设备挂载到这个目录下</li>
<li>mnt 系统提供该目录时为了让用户零食挂载别的文件系统的，我们可以将外部的储存挂载在/mnt上，然后进入该目录就可以查看里面的内容了</li>
<li>opt 这是给主机额外安装软件所摆放的目录，如安装Oracle数据库就可以放在该目录下，默认为空</li>
<li>usr/local 这是另一个给主机额外安装软件所安装的目录，一般时通过编译源码方式安装的程序</li>
<li>var 这个目录中存放着不断扩充着的东西，习惯将经常背修改的目录放在这个目录下，包括各种日志文件</li>
<li>selinux SELinux是一种安全子系统它能控制程序只能访问特定文件，有三种工作模式，可以自行设置</li>
</ul>
<h2 id="远程登录"><a href="#远程登录" class="headerlink" title="远程登录"></a>远程登录</h2><p>公司实际开发中，具体的应用场景时这样的</p>
<ul>
<li>linux服务器时开发小组共享的</li>
<li>正式上线的项目时运行在公网</li>
<li>因此程序员需要远程登录到Linux服务器上面进行项目管理</li>
<li>远程登录客户端有XShell，XFtp，MobaXterm，使用方式都差不多</li>
</ul>
<h2 id="远程文件传输"><a href="#远程文件传输" class="headerlink" title="远程文件传输"></a>远程文件传输</h2><p>使用XFtp或者MobaXterm</p>
<h2 id="vi-vim快熟入门"><a href="#vi-vim快熟入门" class="headerlink" title="vi/vim快熟入门"></a>vi/vim快熟入门</h2><p>Linux系统会内置vi文本编辑器</p>
<p>Vim具有程序编辑的能力，可以看作时vi的增强版本，可以主动的以字体的颜色辨别语法的正确性，方便程序设计，代码补全。</p>
<ul>
<li>正常模式<br>以vim打开一个档案可以直接进入一般模式(这里时默认的模式)。在这个模式中，你可以使用【上下左右】按键来移动光标，你可以使用【删除字符】或【删除整行】来处理档案的内容，也可以使用【复制、粘贴】来处理你的文本数据。</li>
<li>插入模式<br>按下i、I、o、O、a、A、r、R、等任何一个字母之后才会进入编辑模式，一般来说按i比较常用</li>
<li>命令行模式<br>当前在编辑模式下，先按ESC，在输入:(冒号)输入需要执行的命令即可，在这个模式中，可以提供你相关的命令，完成读取、存盘、替换、离开vim、显示行号等的动作，则时在模式中达成的！</li>
</ul>
<p>使用vim开发一个Hello.java程序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="vim的快捷键"><a href="#vim的快捷键" class="headerlink" title="vim的快捷键"></a>vim的快捷键</h2><p>在命令行下输入vim 文件名进入正常模式，</p>
<p>如果需要进入编辑模式就按i，然后就可以写内容了</p>
<p>写完之后需要进入命令模式，先按ESC，在输入：冒号，冒号后面紧接着命令，即可完成整个流程。</p>
<p>(:wq保存并退出 :q退出 :q!强制退出并且不保存)</p>
<p>如无特殊说明，则为 一般模式</p>
<ul>
<li>拷贝当前行yy，拷贝当前行向下的5行，5yy，并粘贴 p</li>
<li>删除当前行dd，删除当前行向下的5行，5dd</li>
<li>在文件中查找某个单词【命令行模式下 /关键字，回车 查找，输入n就是查找下一个】</li>
<li>设置文件的行号，取消文件的行号【命令行下:set nu和:set nonu】</li>
<li>编辑/etc/prfile文件，使用快捷键到该文档的最末行[G]和最首行[gg]</li>
<li>在一个文件中输入”hello”，然后又撤销这个动作 u</li>
<li>编辑/ect/profile文件，并将光标移动到20行 shift + g</li>
</ul>
<h2 id="开启、重启和用户的登录、注销"><a href="#开启、重启和用户的登录、注销" class="headerlink" title="开启、重启和用户的登录、注销"></a>开启、重启和用户的登录、注销</h2><p>shutdown -h now    立刻继续宁关机</p>
<p>shuedown -h 1    1分钟之后关机</p>
<p>shutdown -r now 现在重新启动计算机</p>
<p>halt    关机，作用和上面一样</p>
<p>reboot    现在重新启动计算机</p>
<p>sync    把内存的数据同步到磁盘</p>
<p><strong>注意事项：</strong></p>
<p>1、不管是重启系统还是关系系统，首先要运行sync命令，把内存中的数据写入到磁盘中</p>
<p>2、目前的shutdown、reboot、halt等命令已经在关机前进行了sync。</p>
<p><strong>登录注销：</strong></p>
<p>1、登录时尽量少用root账号登录，因为它是系统管理员，最大的权限，避免操作失误，可以利用普通用户登录，登录后在使用”su - 用户名”来切换成系统管理员身份</p>
<p>2、在提示符下输入logout即可注销用户</p>
<p><strong>使用细节：</strong>logout注销指令在图形运行级别无效，在指令运行级别有效</p>
<h2 id="Linux用户管理"><a href="#Linux用户管理" class="headerlink" title="Linux用户管理"></a>Linux用户管理</h2><p>Linux是一个多用户多任务的操作系统，任何一个要使用系统i资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统</p>
<h3 id="添加用户"><a href="#添加用户" class="headerlink" title="添加用户"></a>添加用户</h3><p>useradd 用户名</p>
<p>1、当创建用户成功后，会自动的创建和用户名的home目录</p>
<p>2、也可以通过useradd -d 指定目录，新的用户名，给新创建的用户指定home目录。</p>
<p>useradd andrew 自动会在/home/andrew创建一个andrew文件夹</p>
<h3 id="指定-修改密码"><a href="#指定-修改密码" class="headerlink" title="指定/修改密码"></a>指定/修改密码</h3><p>passwd 用户名</p>
<p>如果不指定用户名就会给当前的用户修改密码！！！</p>
<p>passwd andrew</p>
<h3 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h3><p>userdel 用户名</p>
<p>1、删除用户andrew，但是要保留/home/andrew目录(默认)</p>
<p>2、删除用户以及主目录 userdel -r andrew</p>
<p>一般情况下，建议保留用户的home目录</p>
<h3 id="查询用户信息"><a href="#查询用户信息" class="headerlink" title="查询用户信息"></a>查询用户信息</h3><p>id 用户名</p>
<h3 id="切换用户"><a href="#切换用户" class="headerlink" title="切换用户"></a>切换用户</h3><p>在操作Linux中，如果当前用户的权限不够。可以使用su - 指令，切换到高权限用户，比如root</p>
<p>su - 用户名</p>
<p>1、从权限高用户切换到权限低得用户，不需要输入密码，反之需要</p>
<p>2、当需要返回到原来得用户时，使用exit/logout指令</p>
<h3 id="查看当前用户-登录用户"><a href="#查看当前用户-登录用户" class="headerlink" title="查看当前用户/登录用户"></a>查看当前用户/登录用户</h3><p>whoami/ who am I</p>
<h3 id="用户组"><a href="#用户组" class="headerlink" title="用户组"></a>用户组</h3><p>类似于角色，系统可以对有共性得多个用户进行统一的管理</p>
<h4 id="新增组"><a href="#新增组" class="headerlink" title="新增组"></a>新增组</h4><p>groupadd 组名</p>
<h4 id="删除组"><a href="#删除组" class="headerlink" title="删除组"></a>删除组</h4><p>groupdel 组名</p>
<h4 id="增加用户时直接加上组"><a href="#增加用户时直接加上组" class="headerlink" title="增加用户时直接加上组"></a>增加用户时直接加上组</h4><p>useradd -g 用户组 用户名</p>
<h4 id="修改用户的组"><a href="#修改用户的组" class="headerlink" title="修改用户的组"></a>修改用户的组</h4><p>usermod -g 用户组 用户名</p>
<h4 id="用户和组相关文件"><a href="#用户和组相关文件" class="headerlink" title="用户和组相关文件"></a>用户和组相关文件</h4><ul>
<li>/etc/passwd文件<br>用户(user)的配置文件，记录用户的各种信息<br>每行的含义：用户名:口名:用户标识号:组标识号:注释性描述:主目录:登录Shell</li>
<li>/etc/shadow文件<br>口令的配置文件<br>每行的含义：登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不阔东时间:失效时间:标志</li>
<li>/etc/group文件<br>组(group)的配置文件，记录Linux包含的组的信息<br>每行含义：组名:口令:组标识号:组内用户列表</li>
</ul>
<h2 id="运行级别"><a href="#运行级别" class="headerlink" title="运行级别"></a>运行级别</h2><p><strong>运行级别说明：</strong></p>
<ul>
<li>0：关机</li>
<li>1：单用户(找回丢失密码)</li>
<li>2：多用户状态没有网络服务</li>
<li>3：多用户状态有网络服务</li>
<li>4：系统未使用保留给用户</li>
<li>5：图形界面</li>
<li>6：系统重启</li>
</ul>
<p>常用运行级别是3和5，也可以执行默认运行级别</p>
<p><strong>应用实例：</strong>init[0 1 2 3 4 5 6] 应用案例：通过init来切换不同得运行级别，比如动5-3，然后关机</p>
<h3 id="指定默认运行级别"><a href="#指定默认运行级别" class="headerlink" title="指定默认运行级别"></a>指定默认运行级别</h3><p>在CentOS7以前，/etc/inittab文件中，进行了简化，如下：</p>
<p>multi-user.target: andlogous to runlevel 3</p>
<p>graphical.target: andlogous to runlevel 5</p>
<h4 id="查看默认运行级别"><a href="#查看默认运行级别" class="headerlink" title="查看默认运行级别"></a>查看默认运行级别</h4><p>systemctl get-default</p>
<h4 id="设置默认运行级别"><a href="#设置默认运行级别" class="headerlink" title="设置默认运行级别"></a>设置默认运行级别</h4><p>systemctl set-default mluti-user.target</p>
<h2 id="找回root密码"><a href="#找回root密码" class="headerlink" title="找回root密码"></a>找回root密码</h2><p>如何找回root密码？</p>
<p>有很多方式，最简单的方式就是登录阿里云平台从控制面板修改</p>
<h2 id="帮助指令"><a href="#帮助指令" class="headerlink" title="帮助指令"></a>帮助指令</h2><p>man获取帮助信息</p>
<p>man [命令或者配置文件] (功能描述:获取帮助信息)</p>
<p>man ls</p>
<p>linux下隐藏文件时以.开头的</p>
<p>ls -la  &amp;&amp; ls -al</p>
<p>命令可以组合输入，并且不需要注重顺序</p>
<p>help指令 获得shell内置帮助文档</p>
<p>百度搜索</p>
<h2 id="文件目录"><a href="#文件目录" class="headerlink" title="文件目录"></a>文件目录</h2><p><strong>pwd 显示当前工作目录的绝对路径</strong></p>
<p><strong>ls 查看当前目录下的文件信息</strong></p>
<p>ls：查看当前目录下 的文件</p>
<p>ls -l：显示文件的详细信息，权限，大小…..</p>
<p>**cd 切换目录 **</p>
<p>cd ~ ：回到自己的home目录</p>
<p>cd ..：回到上一级</p>
<p>cd 文件夹名称：切换到当前目录下的某个文件夹</p>
<p>cd 绝对路径：切换绝对路径下的文件夹</p>
<p><strong>mkdir 创建目录</strong></p>
<p>mkdir [选项] 要创建的目录</p>
<p><strong>选项：</strong></p>
<p>-p：创建多级目录</p>
<p>创建单级目录：mkdir hello</p>
<p>创建多级目录：mkdir -p /www/xiaoyes</p>
<p><strong>rmdir 删除空目录</strong></p>
<p>rmdir [选项] 要删除的目录名称</p>
<p>rmdir删除的时空目录，如果目录下有内容则是无法删除的</p>
<p>如果要删除非空目录，需要使用rm -rf 要删除的目录，<strong>谨慎使用！</strong></p>
<p><strong>touch 创建空文件</strong></p>
<p>touch 文件名称</p>
<p><strong>cp 拷贝</strong></p>
<p>cp [选项] 要拷贝的文件 拷贝到哪里</p>
<p><strong>选项：</strong></p>
<p>-r：递归复制整个文件</p>
<p><strong>rm 移除文件或者目录</strong></p>
<p>rm [选项] 要删除的文件或者目录</p>
<p><strong>选项：</strong></p>
<p>-r：递归删除整个文件夹</p>
<p>-f：强制删除不提示</p>
<p><strong>mv 移动文件与目录或者重命名</strong></p>
<p>mv oldFile newFile 就是重命名</p>
<p>mv /temp/moveFile /targetFolder 移动文件</p>
<p><strong>cat 查看文件内容</strong></p>
<p>cat [选项] 要查看的文件</p>
<p><strong>选项：</strong></p>
<p>-n：显示行号</p>
<p>cat Hello.java</p>
<p>cat -n Hello.java</p>
<p>cat -n Hello.java | more <strong>竖杠表示管道命令</strong></p>
<p><strong>more 按页显示文本文件内容</strong></p>
<p>more执行时一个基于vi编辑器的文本过滤器，它以全屏幕的方式按页显示文本文件的内容，more指令中内置了若干快捷键。</p>
<p>more 要查看的文件</p>
<table>
<thead>
<tr>
<th>操作</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td>空白键(space)</td>
<td>代表向下翻一页</td>
</tr>
<tr>
<td>Enter</td>
<td>向下翻一行</td>
</tr>
<tr>
<td>q</td>
<td>立即离开more</td>
</tr>
<tr>
<td>Ctrl + F</td>
<td>向下滚动一屏</td>
</tr>
<tr>
<td>Ctrl + B</td>
<td>返回上一层</td>
</tr>
<tr>
<td>=</td>
<td>输出当前行号</td>
</tr>
<tr>
<td>:f</td>
<td>输出文件名和当前行号</td>
</tr>
</tbody></table>
<p><strong>less 分屏查看文件内容</strong></p>
<p>less指令用来分屏查看文件内容，它的功能与more指令类似，但是比more指令更加强大，支持各种显示终端。less指令在显示文件内容时，并不是一次将整个文件加载之后才显示，而是根据显示需要加载内容，对于大型文件具有较高的效率。</p>
<p>less 要查看的文件</p>
<table>
<thead>
<tr>
<th>操作</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td>空白键</td>
<td>向下翻动一页</td>
</tr>
<tr>
<td>[pagedown]</td>
<td>向下翻动一页</td>
</tr>
<tr>
<td>[pageup]</td>
<td>向上翻动一页</td>
</tr>
<tr>
<td>/字串</td>
<td>向下搜寻[字串]的功能; n : 向下查找；N : 向上查找</td>
</tr>
<tr>
<td>?字串</td>
<td>向上搜寻[字串]的功能; n : 向上查找；N : 向下查找</td>
</tr>
<tr>
<td>q</td>
<td>离开less这个程序</td>
</tr>
</tbody></table>
<p><strong>echo 输入信息到控制台</strong></p>
<p>echo [选项] [输出内容]</p>
<p>使用echo指令输出环境变量  echo $PATH</p>
<p>使用echo指令树池Hello World！</p>
<p><strong>head 显示文件开头部分内容</strong></p>
<p>head用于显示文件的开头部分内容，默认情况下head指令显示文件的前10行内容</p>
<p>head 文件    查看文件头10行内容</p>
<p>head -n 5 文件    查看文件头5行内容，5可以是任意行数</p>
<p><strong>tail 显示文件尾部的内容</strong></p>
<p>tail用于输出文件中尾部的内容，默认情况下tail指令显示文件的后10行内容</p>
<p>tail 文件    查看文件后10行内容</p>
<p>tail -n 5 文件    查看文件后5行内容，5可以是任意行数</p>
<p>tail -f 文件 实时追踪该文档的所有更新</p>
<p><strong>&gt; 指令 和 &gt;&gt; 指令</strong></p>
<p>一个箭头表示覆盖 两个箭头表示追加</p>
<p>ls -l &gt; 文件    列表的内容写入文件a.txt中(覆盖写)</p>
<p>ls -al &gt;&gt; 文件    列表的内容追加到文件aa.txt的末尾</p>
<p>cat 文件1 &gt; 文件2    将文件1的内容覆盖到文件2</p>
<p>echo “内容” &gt;&gt; 文件</p>
<p><strong>案例：</strong></p>
<p>将/home目录下文件列表写入到/home/info.txt中</p>
<p>ls -l /home &gt; /home/info.txt</p>
<p>如果info.txt不存在则回自动创建</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">写入的结果</span></span><br><span class="line">drwx------. 15 andu andu  4096 9月  14 11:59 andu</span><br><span class="line">-rw-r--r--.  1 root root     0 9月  14 09:54 haha.txt</span><br><span class="line">-rw-r--r--.  1 root root     0 9月  14 12:12 info.txt</span><br><span class="line">-rw-r--r--.  1 root root 12136 9月  14 10:20 text.txt</span><br><span class="line">drwx------.  3 1001 1001  4096 9月  13 14:38 zwj</span><br></pre></td></tr></table></figure>

<p>将当前日历信息追加到/home/mycal文件中</p>
<p>cal &gt;&gt; /home/mycal</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">写入的结果</span></span><br><span class="line">九月 2021     </span><br><span class="line">日 一 二 三 四 五 六</span><br><span class="line">          1  2  3  4</span><br><span class="line"> 5  6  7  8  9 10 11</span><br><span class="line">12 13 14 15 16 17 18</span><br><span class="line">19 20 21 22 23 24 25</span><br><span class="line">26 27 28 29 30</span><br></pre></td></tr></table></figure>

<p><strong>ln 软链接也称为符号链接</strong></p>
<p>类似于Windows里的快捷方式，主要存放了链接其他文件的路径</p>
<p>ln -s [原文件或目录] [软链接名]     给原文件创建一个软链接</p>
<p><strong>案例：</strong></p>
<p>在/home目录下创建一个软链接myroot，链接到/root目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s /root /home/myroot</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@andu01 /]<span class="comment"># cd home</span></span><br><span class="line">[root@andu01 home]<span class="comment"># ls</span></span><br><span class="line">andu  haha.txt  info.txt  mycal  myroot  text.txt  zwj</span><br><span class="line">[root@andu01 home]<span class="comment"># cd myroot/</span></span><br><span class="line">[root@andu01 myroot]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>删除软连接myroot</p>
<p>rm /home/myroot</p>
<p><strong>注意：</strong>：当我们使用pwd指令查看目录时，仍然可以看到的时软链接所在目录</p>
<p><strong>history 查看历史执行过的命令</strong></p>
<p>history    查看所有</p>
<p>history 10    最近执行的10条</p>
<p>history !5    执行曾经执行过的第5条指令</p>
<h2 id="时间日期类"><a href="#时间日期类" class="headerlink" title="时间日期类"></a>时间日期类</h2><p><strong>data 显示当前日期</strong></p>
<p>date    显示当前时间</p>
<p>date +%Y    显示当前年份</p>
<p>date +%m    显示当前月份</p>
<p>date +%d    显示当前是哪一天</p>
<p>date “+%Y-%m-%d %H:%M:%S”    侠士年月日时分秒</p>
<p><strong>cal 查看日历</strong></p>
<p>cal    显示本月日历</p>
<p>cal 2020    显示2020年日历</p>
<h2 id="搜索查找类"><a href="#搜索查找类" class="headerlink" title="搜索查找类"></a>搜索查找类</h2><p><strong>find 查找</strong></p>
<p>find指令将从指定目录下向下递归地遍历其各个子目录，将满足条件的文件或者目录显示在终端</p>
<p>find [搜索范围] [选项]</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-name&lt;查询方式&gt;</td>
<td>按照指定的文件名查找模式查找文件</td>
</tr>
<tr>
<td>-user&lt;用户名&gt;</td>
<td>查找属于指定用户名所有文件</td>
</tr>
<tr>
<td>-size&lt;文件大小&gt;</td>
<td>按照指定的文件大小查找文件</td>
</tr>
</tbody></table>
<p><strong>案例：</strong></p>
<p>按文件名：根据名称查找/home目录下的hello.txt文件</p>
<p>find /home -name hello.txt</p>
<p>按拥有者：查找/opt目录下，用户名称为nobody的文件</p>
<p>find /opt -user nobody</p>
<p>查找整个linux系统下大于200M的文件(+n大于 -n大于 n等于，单位有K、M、G)</p>
<p>find / -size +200M</p>
<p><strong>locate 快速定位文件路径</strong></p>
<p>locate指令可以快读定位文件路径。kicate指令利用用实现建立的系统中的所有文件名称以及路径的locate数据库实现快速定位给定的文件，locate指令无须遍历整个文件系统，查询速度较快。为了保证查询结果的准确性，管理员必须定期更新locate时刻</p>
<p>locate 搜索文件</p>
<p>由于locate指令基于数据库进行查询，所以，第一次运行之前，必须使用updatedb指令创建locate数据库。</p>
<p><strong>案例：</strong></p>
<p>请使用locate指令快速定位hello.txt文件所在目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@andu01 CentOS 7 x86_64]<span class="comment"># updatedb</span></span><br><span class="line">[root@andu01 CentOS 7 x86_64]<span class="comment"># locate hello.txt</span></span><br><span class="line">/hello.txt</span><br><span class="line">/www/bbb/hello.txt</span><br></pre></td></tr></table></figure>

<p><strong>which 查看某个指令在哪个目录下</strong></p>
<p>which 命令</p>
<p>which ls</p>
<p><strong>grep和管道符号|</strong></p>
<p>grep过滤查找，管道符号。”|”，表示将前一个命令的处理结果输出传递给后面的命令处理</p>
<p><strong>基本语法：</strong></p>
<p>grep [选项] 查找内容 源文件</p>
<p><strong>常用选项：</strong></p>
<table>
<thead>
<tr>
<th>选项</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-n</td>
<td>显示匹配行及行号</td>
</tr>
<tr>
<td>-i</td>
<td>忽略字母大小写</td>
</tr>
</tbody></table>
<p><strong>应用案例：</strong></p>
<p>请在hello.txt文件中，查找”yes”所在行，并且显示行号</p>
<p>cat hello.txt | grep yes</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@andu01 bbb]<span class="comment"># cat hello.txt | grep yes</span></span><br><span class="line"><span class="built_in">yes</span> My name is Bi Jizhuang</span><br></pre></td></tr></table></figure>

<p>不使用管道符号的方式</p>
<p>grep yes hello.txt</p>
<p>显示行号的写法</p>
<p>cat hello.txt | grep -n yes</p>
<h2 id="压缩和解压类"><a href="#压缩和解压类" class="headerlink" title="压缩和解压类"></a>压缩和解压类</h2><p><strong>gzip/gunzip</strong></p>
<p>gzip是用于压缩文件，gunzip用来解压文件</p>
<p>gzip    压缩文件，之恩将文件压缩为*.gz文件</p>
<p>gunzip    解压缩文件命令</p>
<p>gzip压缩，将/home下的haha.txt文件进行压缩</p>
<p>gzip /home/haha.txt</p>
<p>解压</p>
<p>gunzip haha.txt.gz</p>
<p><strong>zip/unzip</strong></p>
<p>zip用于压缩文件，unzip用于解压</p>
<p>zip [选项] xxx.zip    压缩</p>
<p>unzip [选项] xxx.zip 解压</p>
<p>zip常用选项：</p>
<p>-r：递归压缩，即压缩目录</p>
<p>unzip常用选项：</p>
<p>-d&lt;目录&gt;：指定解压后文件的存放目录</p>
<p>将/home文件夹下的所有文件压缩成myhome.zip</p>
<p>zip -r myhome.zip /home</p>
<p>将myhome.zip解压到/opt/tmp目录下</p>
<p>unzip myhome.zipi -d /opt/tmp</p>
<p><strong>tar 打包/解压</strong></p>
<p>tar命令是打包指令，最后打包后的文件是.tar.gz的文件</p>
<p>tar [选项] xx.tar.gz 打包的内容</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-c</td>
<td>产生tar打包文件</td>
</tr>
<tr>
<td>-v</td>
<td>显示详细信息</td>
</tr>
<tr>
<td>-f</td>
<td>之后顶压缩后的文件名</td>
</tr>
<tr>
<td>-z</td>
<td>打包同时压缩</td>
</tr>
<tr>
<td>-x</td>
<td>解压tar文件</td>
</tr>
</tbody></table>
<p>压缩多个文件将/home/pig.txt 和 /home/cat.txt 压缩成pc.tar.gz</p>
<p>tar -zcvf pc.tar.gz /home/pig.txt /home/cat.txt</p>
<p>将/home压缩成myhome.tar.gz</p>
<p>tar -zcvf myhome.tar.gz /home</p>
<p>将pc.tar.gz解压到当前目录</p>
<p>tar -zxvf pc.tar.gz</p>
<p>将myhome.tar.gz解压到/opt/tmp2目录下</p>
<p>tar -zxvf home.tar.gz -C /opt/tmp2</p>
<h2 id="Linux组"><a href="#Linux组" class="headerlink" title="Linux组"></a>Linux组</h2><p>在linux中的每个用户必须属于一个组，不能独立于组外，在Linux中每个文件有所有者、所在者、其他组的概念</p>
<ul>
<li>1、所有者</li>
<li>2、所在组</li>
<li>3、其他组</li>
</ul>
<p>比如有一个hello.txt文件，它是andu用户创建的，andu就是hehllo.txt的所有者，也可以将hello.txt的所有者修改为andew</p>
<p>当然，由于hello.txt的创建者 andu是组 tencent的，则hello.txt的所在组就是tencent，该tencent组下的用户则拥有hello.txt的权限</p>
<p>还有一个ali组，则hello.txt相对于ali的关系就是其他组</p>
<p><strong>每个用户都属于一个组</strong></p>
<h3 id="文件-目录所有者"><a href="#文件-目录所有者" class="headerlink" title="文件/目录所有者"></a>文件/目录所有者</h3><p>一般为文件的创建者，谁创建了该文件，就自然称为该文件的所有者</p>
<ul>
<li>查看文件的所有者<br>指令：ls -ahl</li>
<li>修改文件的所有者<br>chown 用户名 文件名<br>修改apple.txt的文件所有者为andu<br>chown andu apple.txt</li>
</ul>
<h3 id="组的创建"><a href="#组的创建" class="headerlink" title="组的创建"></a>组的创建</h3><p>groupadd 组名</p>
<p>创建组master</p>
<p>groupadd master</p>
<p>创建用户bjz，放入master组内</p>
<p>useradd -g master bjz</p>
<h3 id="文件-目录所在组"><a href="#文件-目录所在组" class="headerlink" title="文件/目录所在组"></a>文件/目录所在组</h3><p>当某个用户创建了一个文件之后，这个文件的所在组就是该用户所在的组</p>
<p>使用bjz创建一个文件，看看这个文件所在的组</p>
<p>创建文件    touch banana.txt</p>
<p>查看文件信息    ll</p>
<p><strong>修改文件所在的组</strong></p>
<p>chgrp 组名 文件名</p>
<p>使用root用户创建文件orange.txt，看看当前这个文件属于哪个组，然后将这个文件所在组，修改到fruit组</p>
<p>创建组 groupadd fruit</p>
<p>创建文件 orange.txt</p>
<p>查看文件组信息 ll</p>
<p>chgrp fruit orange.txt</p>
<h2 id="其他组"><a href="#其他组" class="headerlink" title="其他组"></a>其他组</h2><p>除文件的所有者和所在组的用户外，系统的其他用户都是文件的其他组</p>
<h2 id="改变用户所在组"><a href="#改变用户所在组" class="headerlink" title="改变用户所在组"></a>改变用户所在组</h2><p>在添加用户时，可以指定将该用户添加到哪个组中，同样的用root的管理权限可以改变某个用户所在的组</p>
<p><strong>改变用户所在的组：</strong></p>
<p>usermod -g 组名 用户名</p>
<p>usermod -d 目录名 用户名 改变该用户登录的初始目录</p>
<h2 id="Linux权限"><a href="#Linux权限" class="headerlink" title="Linux权限"></a>Linux权限</h2><h3 id="权限的基本介绍"><a href="#权限的基本介绍" class="headerlink" title="权限的基本介绍"></a>权限的基本介绍</h3><p>ls -l中显示的内容如下：</p>
<p>drwx——. 15 andu andu    4096 9月  15 13:19 abc</p>
<p><strong>0-9位说明：</strong></p>
<ul>
<li>第0位确定文件类型(d, -, l, c ,b)<br>l是链接，相当于windows的快捷方式<br>d是目录，相当于windows的文件夹<br>c是字符设备文件，鼠标，键盘<br>b是块设备，比如硬盘</li>
<li>是一个文件(txt、zip、png…)</li>
<li>第1-3位确定所有者(该文件的所有者)拥有该文件的权限，—User</li>
<li>第4-6位确定所属组(同用户组的)拥有该文件的权限，—Group</li>
<li>第7-9位确定其他用户拥有该文件的权限 —Other</li>
</ul>
<p>在Linux中权限也可以使用数字表示：r=4，w=2，x=1 因此rwx=4 + 2 + 1 = 7</p>
<p><strong>其他说明：</strong></p>
<p>15    文件：硬连接数或目录：子目数</p>
<p>andu 用户</p>
<p>andu 用户组</p>
<p>4096    文件大小(字节)，如果是文件夹，显示4069字节</p>
<p>9月  15 13:19    最后修改日期</p>
<p>abc    文件名</p>
<h3 id="rwx"><a href="#rwx" class="headerlink" title="rwx"></a>rwx</h3><ul>
<li><strong>rwx作用到文件</strong></li>
</ul>
<p>1、[r]代表可读(read)：可以读取，查看</p>
<p>2、[w]代表可写[write]：可以修改，但是不代表可以删除该文件，删除一个文件的前提条件是对该文件所在的目录有写权限，才能删除该文件</p>
<p>3、[x]代表可执行(execute)：可以被执行</p>
<ul>
<li><strong>rwx作用到目录</strong></li>
</ul>
<p>1、[r]代表可读(read)：可以读取，ls查看目录内容</p>
<p>2、[w]代表可写(write)：可以修改，对目录内创建+删除+重命名目录</p>
<p>3、[x]代表可执行(execute)：可以进入该目录</p>
<h3 id="修改权限"><a href="#修改权限" class="headerlink" title="修改权限"></a>修改权限</h3><p>通过chmod指令，可以修改文件或者目录的权限</p>
<p><strong>第一种方式：+、-、= 变更权限：</strong></p>
<p>u：所有者    g：所有组    o：其他人：a：所有人(u、g、o的总和)</p>
<p>1、chmod u=rwx,g=rx,o=x    文件/目录名</p>
<p>2、chmod o+w    文件/目录名</p>
<p>3、chmod a-x    文件/目录名</p>
<p><strong>案例：</strong></p>
<p>1、给abc文件的所有者读写执行的权限，给所在组读执行权限，给其他组读执行权限</p>
<p>chmod u=rwx,g=rx,o=rx abc</p>
<p>2、给abc文件的所有者除去执行的权限，增加组写的权限</p>
<p>chmod u-x,g+w abc</p>
<p>3、给abc文件的所有用户添加读的权限<br>chmod a+r abc</p>
<p><strong>第二种方式：通过数字变更权限</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">r=4 w=2 x=1	rwx=4+2+1=7</span><br><span class="line"><span class="built_in">chmod</span> u=rwx,g=rx,o=x 文件目录名 相当于 <span class="built_in">chmod</span> 751</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong></p>
<p>1、将/home/abc.txt文件的权限系改成rwxr-xr-x，使用给数字的方式实现</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 755 /home/abc.txt</span><br></pre></td></tr></table></figure>

<h3 id="修改文件-目录所有者"><a href="#修改文件-目录所有者" class="headerlink" title="修改文件/目录所有者"></a>修改文件/目录所有者</h3><p>chown newowner 文件/目录 改变所有者</p>
<p>chown newowner:newgroup 文件/目录 改变所有者和所在组</p>
<p>-R 如果是目录 则使其下所有子文件或目录递归生效</p>
<p><strong>案例：</strong></p>
<p>1、将/home/abc.txt文件的所有者系改成tom</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> tom /home/abc.txt</span><br></pre></td></tr></table></figure>

<p>2、将/home/kkk目录下所有的文件和目录的所有者修改成tom</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> -R tom /home/kkk</span><br></pre></td></tr></table></figure>

<h3 id="修改文件-目录所在组"><a href="#修改文件-目录所在组" class="headerlink" title="修改文件/目录所在组"></a>修改文件/目录所在组</h3><p>chgrp newgroup 文件/目录 改变所在组</p>
<p><strong>案例：</strong></p>
<p>将/home/abc.txt文件的所在组修改成shaolin(少林)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupadd shaolin</span><br><span class="line"><span class="built_in">chgrp</span> shaolin /home/abc.txt</span><br></pre></td></tr></table></figure>

<p>将/home/kkk目录下所有的文件和目录的所在组都修改成shaolin(少林)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chgrp</span> -R shaolin /home/kkk</span><br></pre></td></tr></table></figure>

<h3 id="权限管理实践"><a href="#权限管理实践" class="headerlink" title="权限管理实践"></a>权限管理实践</h3><h4 id="警察和土匪游戏"><a href="#警察和土匪游戏" class="headerlink" title="警察和土匪游戏"></a>警察和土匪游戏</h4><table>
<thead>
<tr>
<th>警察组(police)</th>
<th>土匪组(bandit)</th>
</tr>
</thead>
<tbody><tr>
<td>jack</td>
<td>xh</td>
</tr>
<tr>
<td>jerry</td>
<td>xq</td>
</tr>
</tbody></table>
<p>1、创建组</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd police	groupbandit</span><br></pre></td></tr></table></figure>

<p>2、创建用户</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useradd -g police jack	useradd -g police jerry</span><br><span class="line">useradd -g bandit xh      useradd -g bandit xq</span><br></pre></td></tr></table></figure>

<p>3、jack创建一个文件，自己可以读写</p>
<p>首先jack登录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim jack.txt</span><br><span class="line"><span class="built_in">chmod</span> 640 jack.txt</span><br></pre></td></tr></table></figure>

<p>4、jack修改该文件，让其他组人可以读，本组人可以读写</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 644 jack.txt  或者 <span class="built_in">chmod</span> o=r,g=r jack.txt</span><br></pre></td></tr></table></figure>

<p>5、xh投靠警察</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -g police xh</span><br></pre></td></tr></table></figure>

<p>6、看看xh和xq是否可以读写该文件，小结论：如果要对目录内的文件进行操作，需要先有对该目录的相应权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 770 /home/jack</span><br></pre></td></tr></table></figure>


<h4 id="西游记案例"><a href="#西游记案例" class="headerlink" title="西游记案例"></a>西游记案例</h4><p>1、建立两个组：神仙(sx)、妖怪(yg)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupadd sx</span><br><span class="line">groupadd yg</span><br></pre></td></tr></table></figure>
<p>2、建立四个用户（唐僧、悟空、八戒、沙僧）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">useradd ts</span><br><span class="line">useradd wk</span><br><span class="line">useradd bj</span><br><span class="line">useradd ss</span><br></pre></td></tr></table></figure>
<p>3、设置密码<br>密码统一设置为用户名<br>4、把悟空、八戒放入妖怪，唐僧、沙僧放入神仙组</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">usermod -g yg wk</span><br><span class="line">usermod -g yg bj</span><br><span class="line">usermod -g sx ts</span><br><span class="line">usermod -g sx ss</span><br></pre></td></tr></table></figure>
<p>5、用悟空创建一个文件（monkey.java 该文件要输出i am monkey）<br>登录 vim monkey.java<br>5、给八戒一个可以rw的权限<br>因为八戒和悟空是同一个组的，所以给当前组添加写的权限就OK</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> g+w monkey.java</span><br></pre></td></tr></table></figure>
<p>6、八戒修改monkey.java加入一句话(i am pig)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[bj@andu01 ~]$ <span class="built_in">cd</span> /home/wk</span><br><span class="line">-bash: <span class="built_in">cd</span>: /home/wk: 权限不够</span><br></pre></td></tr></table></figure>
<p>发现wk这个目录进不去也是无法修改文件的<br>所以我们要对该目录进行权限修改</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> g+r+w+x wk // 将wk当前组的权限修改为读写执行</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /home/wk</span><br><span class="line">vim monkey.java</span><br></pre></td></tr></table></figure>
<p>7、把沙僧放入妖怪组<br>此时沙僧还是无法进入wk目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[ss@andu01 /]$ <span class="built_in">cd</span> /home/wk</span><br><span class="line">-bash: <span class="built_in">cd</span>: /home/wk: 权限不够</span><br><span class="line"></span><br><span class="line">// 我们将沙僧修改为妖怪组</span><br><span class="line">usermod -g yg ss</span><br></pre></td></tr></table></figure>
<p>然后看一看沙僧是否可以进入wk的文件夹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[ss@andu01 /]$ <span class="built_in">cd</span> /home/wk</span><br><span class="line">-bash: <span class="built_in">cd</span>: /home/wk: 权限不够</span><br></pre></td></tr></table></figure>
<p>发现还是进不去，很奇怪！</p>
<p>进不去的原因是因为沙僧，在登录之前是神仙组，然后在沙僧的登录过程中，root用户修改了沙僧的权限，所以，沙僧自己都没有反应过来自己的组被修改了，所以当然是无法进入自己组的用户共享的目录，所以我们要做的就是，重新登录沙僧账户，然后组状态才会重新加载</p>
<p>8、沙僧修改monkey.java<br>vim /home/wk/monkey.java</p>
<p><strong>细节分析：</strong><br>假如此时，我们使用root用户对wk目录的权限进行修改</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 组的所有权限都移除</span></span><br><span class="line"><span class="built_in">chmod</span> g-r-w-x wk</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加执行权限</span></span><br><span class="line"><span class="built_in">chmod</span> g+x wk</span><br></pre></td></tr></table></figure>
<p>然后我们使用悟空同组的八戒登录，并且尝试进入wk目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[bj@andu01 /]$ <span class="built_in">cd</span> /home/wk</span><br><span class="line">[bj@andu01 wk]$ <span class="built_in">ls</span></span><br><span class="line"><span class="built_in">ls</span>: 无法打开目录.: 权限不够</span><br></pre></td></tr></table></figure>
<p>发现是可以进去的(因为有了x权限)，但是不能使用ls访问该文件夹下的文件<br>但是此时，我们虽然看不见此目录下有哪些文件，但是我们知道该目录下有个monkey.java文件，我们尝试修改一下这个文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[bj@andu01 wk]$ vim monkey.java</span><br></pre></td></tr></table></figure>
<p>结果是可以正常修改文件的！！！<br>这是因为，我们虽然对wk这个目录只赋予了x的权限，但是wk目录内的文件monkey.java，确是有着本组用户可以读取和修改的权限的</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-rw-rw-r--. 1 wk yg 92 9月  17 14:46 monkey.java</span><br><span class="line"></span><br><span class="line"><span class="comment"># 当然，直接使用cat查看也是可以的</span></span><br><span class="line"></span><br><span class="line">[bj@andu01 wk]$ <span class="built_in">cat</span> monkey.java</span><br><span class="line">i am monkey</span><br><span class="line"></span><br><span class="line">i an pig</span><br><span class="line"></span><br><span class="line">我是沙僧，我现在是妖怪了！</span><br><span class="line"></span><br><span class="line">八戒来偷吃西瓜了！</span><br></pre></td></tr></table></figure>
<p>此时，我们使用root用户或者悟空把wk这个目录的读取权限在开放给本组的 用户</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@andu01 /]<span class="comment"># chmod g+r /home/wk</span></span><br></pre></td></tr></table></figure>
<p>然后现在八戒是可以正常读取到该目录下的文件的，ls是针对于目录的权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[bj@andu01 home]$ <span class="built_in">cd</span> wk</span><br><span class="line">[bj@andu01 wk]$ ll</span><br><span class="line">总用量 4</span><br><span class="line">-rw-rw-r--. 1 wk yg 92 9月  17 14:46 monkey.java</span><br></pre></td></tr></table></figure>
<p>现在因为monkey.java对本组开放了写的权限，我们尝试一下操作</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[bj@andu01 wk]$ <span class="built_in">rm</span> monkey.java</span><br><span class="line"><span class="built_in">rm</span>: 无法删除<span class="string">&quot;monkey.java&quot;</span>: 权限不够</span><br></pre></td></tr></table></figure>
<p>我们发现，拥有写权限并不代表可以创建或者删除，而是可以修改</p>
<p>如果我们此时尝试再wk目录下创建ok.txt呢？</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这里创建文件的权限是针对于wk目录的</span></span><br><span class="line">[bj@andu01 wk]$ <span class="built_in">touch</span> ok.java</span><br><span class="line"><span class="built_in">touch</span>: 无法创建<span class="string">&quot;ok.java&quot;</span>: 权限不够</span><br></pre></td></tr></table></figure>
<p>因为wk文件夹没有对本组开放写的权限，所以导致无法创建文件<br>我们此时再使用悟空对wk目录进行本组写的权限开放，然后再尝试再wk目录下创建ok.txt文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@andu01 /]<span class="comment"># chmod g+w /home/wk</span></span><br><span class="line"></span><br><span class="line">[bj@andu01 wk]$ <span class="built_in">touch</span> ok.txt</span><br><span class="line">[bj@andu01 wk]$</span><br></pre></td></tr></table></figure>
<p>此时是可以正常创建文件的(在Linux中，无输出内容则表示命令执行成功)</p>
<p><strong>对文件夹rwx的细节分析：</strong></p>
<ul>
<li>x表示可以进入到该目录，比如cd</li>
<li>r表示可以ls，将目录的内容显示</li>
<li>w表示可以在该目录删除或者创建文件</li>
</ul>
<h2 id="定时任务调度"><a href="#定时任务调度" class="headerlink" title="定时任务调度"></a>定时任务调度</h2><h3 id="crond任务调度"><a href="#crond任务调度" class="headerlink" title="crond任务调度"></a>crond任务调度</h3><p>crontab进行 定时任务的设置<br><strong>概述：</strong><br>任务调度：是指系统在某个时间主席那个的特定的命令或程序<br>任务调度分类：</p>
<ul>
<li>系统工作：有些重要的工作必须周而复始地执行，如病毒扫描等</li>
<li>个别用户工作：个别用户工作可能希望执行某些程序，比如对MySQL数据库的备份。</li>
</ul>
<p><strong>基本语法：</strong><br>crontab [选项]</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>-e</td>
<td>编辑crontab定时任务</td>
</tr>
<tr>
<td>-l</td>
<td>查询crontab任务</td>
</tr>
<tr>
<td>-r</td>
<td>删除当前用户所有的crontab任务</td>
</tr>
</tbody></table>
<h4 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h4><p>设置任务调度文件：/etc/crontab<br>设置个人任务调度：执行crontab -e 命令<br>接着输入需要执行的任务到调度文件<br>如：*/1 * * * * ls -l /etc/ &gt; /tmp/to.txt<br>意思说每小时的每分钟执行ls -l /etc/ &gt; /tmp/to.txt 命令</p>
<p><strong>参数细节说明：</strong></p>
<table>
<thead>
<tr>
<th>项目</th>
<th>含义</th>
<th>范围</th>
</tr>
</thead>
<tbody><tr>
<td>第一个 *</td>
<td>一小时当中的第几分钟</td>
<td>0-59</td>
</tr>
<tr>
<td>第二个 *</td>
<td>一天当中的第几小时</td>
<td>0-23</td>
</tr>
<tr>
<td>第三个 *</td>
<td>一个月当中的第几天</td>
<td>1-31</td>
</tr>
<tr>
<td>第四个 *</td>
<td>一年当中的第几月</td>
<td>1-12</td>
</tr>
<tr>
<td>第五个 *</td>
<td>一周当中的星期几</td>
<td>0-7（0-7都代表星期日）</td>
</tr>
</tbody></table>
<h4 id="特殊符号说明"><a href="#特殊符号说明" class="headerlink" title="特殊符号说明"></a>特殊符号说明</h4><table>
<thead>
<tr>
<th>特殊符号</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>*</td>
<td>代表任何时间。比如第一个 “*” 就代表一小时中每分钟都能执行一次的意思</td>
</tr>
<tr>
<td>,</td>
<td>代表不连续的时间。比如 “0 8,12,16 * * * “命令，代表在每天的8点0分，12点0分，16点0分都执行一次命令</td>
</tr>
<tr>
<td>-</td>
<td>代表连续的时间范围。比如” 0 5 * * 1-6 “命令，代表在周一到周六的凌晨5点0分执行命令</td>
</tr>
<tr>
<td>*/n</td>
<td>代表每隔多久执行一次，比如 “ */10 * * * * “命令，代表每隔10分钟就执行一遍命令</td>
</tr>
</tbody></table>
<h4 id="特定时间执行任务案例"><a href="#特定时间执行任务案例" class="headerlink" title="特定时间执行任务案例"></a>特定时间执行任务案例</h4><table>
<thead>
<tr>
<th>时间</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>45 22 * * *</td>
<td>在22点45分执行命令</td>
</tr>
<tr>
<td>0 17 * * 1</td>
<td>每周1的17点0分执行命令</td>
</tr>
<tr>
<td>0 5 1,15 * *</td>
<td>每月1号和15号的凌晨5点0分执行命令</td>
</tr>
<tr>
<td>40 4 * * 1-5</td>
<td>每周一到周五的凌晨4点40分执行命令</td>
</tr>
<tr>
<td>*/10 4 * * *</td>
<td>每天的凌晨4点，每隔10分钟执行一次命令</td>
</tr>
<tr>
<td>0 0 1,15 * 1</td>
<td>每月1号和15号，每周1的0点0分都会执行命令。注意：星期几和几号最好不要同时出现，因为他们定义的都是天。非常容易让管理员混乱。</td>
</tr>
</tbody></table>
<h4 id="任务调度实例"><a href="#任务调度实例" class="headerlink" title="任务调度实例"></a>任务调度实例</h4><p><strong>每隔一分钟就将当前的日期信息，追加到/tmp/mydate文件中</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*/1 * * * * <span class="built_in">date</span> &gt;&gt; /tmp/date</span><br></pre></td></tr></table></figure>


<p><strong>每隔1分钟，就将当前日期和日历都追加到/home/mycal文件中</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编写shell脚本 my.sh</span></span><br><span class="line"><span class="built_in">date</span> &gt;&gt; /tmp/mycal</span><br><span class="line">cal &gt;&gt; /tmp/mycal</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置定时任务</span></span><br><span class="line">crontab -e</span><br><span class="line">*/10 * * * * /home/my.sh</span><br></pre></td></tr></table></figure>


<p><strong>每天凌晨2:00将MySQL数据库 testdb备份到文件中。</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 2 * * * mysqldump -uroot -phelloworld testdb &gt; /home/db.bak</span><br></pre></td></tr></table></figure>
<p><strong>crond相关指令：</strong></p>
<ul>
<li>crontab -r：终止任务调度</li>
<li>crontab -l：列出当前有哪些任务调度</li>
<li>service crond restart [重启任务调度]</li>
</ul>
<h3 id="at定时任务"><a href="#at定时任务" class="headerlink" title="at定时任务"></a>at定时任务</h3><p>1、at命令是一次性定时计划任务，at的守护进程atd会以后台模式运行，检查作业队列来运行<br>2、默认其工况下，atd守护进程每60秒检查作业队列，有作业时，会检查作业运行时间，如果时间与当前时间匹配，则运行此作业<br>3、at命令时一次性定时计划任务，执行完了一个任务后不在执行此任务了<br>4、在使用at命令的时候，一定要保证atd进程的启动，可以使用相关指令来查看<br>ps -ef 检查当前所有在运行的进程<br>ps -ef | grep atd 可以检查atd是否在运行 如果可以看到结果，表示atd正在运行</p>
<p><strong>语法：</strong><br>at [选项] [时间]<br>Ctrl + D 结束at命令的输入</p>
<p><strong>命令选项：</strong></p>
<table>
<thead>
<tr>
<th>选项</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>-m</td>
<td>当指定的任务被完成后，将给用户发送又将，即使没有标准输出</td>
</tr>
<tr>
<td>-I</td>
<td>atq的别名</td>
</tr>
<tr>
<td>-d</td>
<td>atm的别名</td>
</tr>
<tr>
<td>-v</td>
<td>显示任务将被执行的时间</td>
</tr>
<tr>
<td>-c</td>
<td>打印任务的内容到标准输出</td>
</tr>
<tr>
<td>-V</td>
<td>显示版本信息</td>
</tr>
<tr>
<td>-q &lt;队列&gt;</td>
<td>使用指定的队列</td>
</tr>
<tr>
<td>-f &lt;文件&gt;</td>
<td>从指定文件读入任务而不是从标准输入读入</td>
</tr>
<tr>
<td>-t &lt;时间参数&gt;</td>
<td>以时间参数的形式提交到运行的任务</td>
</tr>
</tbody></table>
<h4 id="at指定时间的方法"><a href="#at指定时间的方法" class="headerlink" title="at指定时间的方法"></a>at指定时间的方法</h4><p>1、接受在当天的hh:mm(小时:分钟)式的时间指定。加入时间已过去，那么就放在第二天执行。例如：04:00<br>2、使用midnight（深夜），noon（中午），teatime(饮茶时间，一般时下午4点)等比较模糊的词语来指定时间。<br>3、采用12小时制，即在时间后面加上AM（上午）或PM（下午）来说明时上午还是下午。例如：12pm<br>4、指定命令执行的具体日期，指定格式为month day（月 日）或mm/dd/yy（月/日/年）或dd.mm.yy（日.月.年），指定的日期必须跟在指定时间的后面。例如：04:00 2021-09-17<br>5、使用相对计时法。指定格式为：now + count time-units，now就是当前时间，time-untis就是时间安慰，这里能够使minutes（分钟）、hour（小时）、day（天）、week（星期）。count时时间的数量，几天，几小时，例如：now + 5 minutes<br>6、直接使用today（今天）、tomorrow（明天）来指定完成命令的时间</p>
<h4 id="应用实例"><a href="#应用实例" class="headerlink" title="应用实例"></a>应用实例</h4><p>1、2天后的下午5点指定/bin/ls /home</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">at 5pm + 2 days</span><br><span class="line"><span class="comment">#  回车之后输入任务</span></span><br><span class="line">/bin/ls /home</span><br><span class="line"><span class="comment"># 然后使用两次Ctrl + D保存</span></span><br></pre></td></tr></table></figure>
<p>2、atq命令来查看系统中没有指定的工作任务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">atq</span><br></pre></td></tr></table></figure>

<p>3、明天17点钟，输出时间到指定文件内 比如/root/date100.log</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">at 5pm tomorrow</span><br><span class="line"><span class="built_in">date</span> &gt; /root/date100.<span class="built_in">log</span></span><br><span class="line">Ctrl + D * 2</span><br></pre></td></tr></table></figure>

<p>4、2分钟后，输出时间到指定文件内 比如/root/date200.log</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">at now + 2 minutes</span><br><span class="line"><span class="built_in">date</span> &gt; /root/date200.<span class="built_in">log</span></span><br><span class="line">Ctrl + D * 2</span><br></pre></td></tr></table></figure>

<p>5、删除已经设置的任务，atrm 编号</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 比如此时要删除任务的编号为3</span></span><br><span class="line">atrm 3</span><br></pre></td></tr></table></figure>


<h2 id="Linux分区"><a href="#Linux分区" class="headerlink" title="Linux分区"></a>Linux分区</h2><p><strong>原理介绍：</strong><br>1、Linux来说无论有几个分区，分给哪一目录使用，它归根结底只有一个根目录，一个独立且唯一的文件结果，Linux中每隔分区都是用来组成整个文件系统的一部分<br>2、Linux采用了一种叫 “载入” 的处理方法，它的整个文件系统在红包含了一整套的文件和目录，且将一个分区和一个目录联系起来，这是要载入的一个分区将使它的储存空间在一个目录下获得。</p>
<p>可以使用lsblk命令查看分区以及挂载情况：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@andu01 ~]<span class="comment"># lsblk</span></span><br><span class="line">NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda      8:0    0   20G  0 disk</span><br><span class="line">├─sda1   8:1    0    1G  0 part /boot</span><br><span class="line">├─sda2   8:2    0    2G  0 part [SWAP]</span><br><span class="line">└─sda3   8:3    0   17G  0 part /</span><br><span class="line">sr0     11:0    1  4.4G  0 rom  /run/media/root/CentOS 7 x86_64</span><br></pre></td></tr></table></figure>
<p><strong>硬盘说明：</strong><br>Linux硬盘分IDE硬盘和SCST硬盘，目前基本上是SCSI硬盘</p>
<h3 id="磁盘挂载案例"><a href="#磁盘挂载案例" class="headerlink" title="磁盘挂载案例"></a>磁盘挂载案例</h3><p>增加一块硬盘为例来熟悉下磁盘的相关指令和深入理解磁盘分区、挂载、卸载的概念。</p>
<p><strong>如何添加一块硬盘：</strong><br>1、虚拟机添加硬盘<br>2、分区<br>3、格式化<br>4、挂载<br>5、设置可以自动挂载</p>
<p>略…</p>
<h2 id="网络配置"><a href="#网络配置" class="headerlink" title="网络配置"></a>网络配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Linux下查看网络信息</span></span><br><span class="line">ifconfig</span><br><span class="line"></span><br><span class="line"><span class="comment"># Windows下查看网络信息</span></span><br><span class="line">ipconfig</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查主机与网络之间的互通性</span></span><br><span class="line">ping</span><br></pre></td></tr></table></figure>
<h3 id="NAT网络原理图"><a href="#NAT网络原理图" class="headerlink" title="NAT网络原理图"></a>NAT网络原理图</h3><p><img src="https://cdn.nlark.com/yuque/0/2021/png/12375174/1632012253696-3c68ee86-b9a0-4daf-b4f3-4d8ed440efaa.png#clientId=u65bb31da-3899-4&from=paste&height=209&id=u5e4d5b84&margin=%5Bobject%20Object%5D&name=image.png&originHeight=418&originWidth=1089&originalType=binary&ratio=1&size=174074&status=done&style=none&taskId=u26bc3022-0a88-4e47-aa51-eb774326cc9&width=544.5" alt="image.png"></p>
<h3 id="网络环境配置"><a href="#网络环境配置" class="headerlink" title="网络环境配置"></a>网络环境配置</h3><p><strong>第一种（自动获取）：</strong><br>Linux启动后会自动获取IP，缺点是每次自动获取的，IP地址可能不一样</p>
<p><strong>第二种（指定IP）：</strong><br>直接修改配置文件来指定IP，并且可以连接到外网（程序员推荐）<br>编辑：vi/etc/sysconfig/network-scripts/ifcfg-ens33<br>要求：将ip地址配置为静态的，比如ip地址为：192.168.200.130</p>
<p><strong>ifcfg-ens33文件说明：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DEVICE=eth0		<span class="comment"># 接口名(设备，网卡)</span></span><br><span class="line">HWADDR=00:0C:2x:6x:0x:xx	<span class="comment"># MAC地址</span></span><br><span class="line">TYPE=Ethernet	<span class="comment"># 网络类型(通常是Ethernet)</span></span><br><span class="line">UUID=xxx-xx-xx-xxx- <span class="comment"># 通常是随机的</span></span><br><span class="line">ONBOOT=<span class="built_in">yes</span> <span class="comment"># 系统启动时候网络接口是否有效</span></span><br><span class="line">BOOTPROTO=static <span class="comment"># IP的配置方法[none|static|bootp|dhcp](引实时不使用协议|静态分配IP|BOOTP协议|DHCP协议)</span></span><br><span class="line">IPADDR=192.168.200.130 <span class="comment"># IP地址</span></span><br><span class="line">CATEWAY=192.168.200.2 <span class="comment"># 网关</span></span><br><span class="line">DNS1=192.168.200.2 <span class="comment"># 域名解析器</span></span><br></pre></td></tr></table></figure>
<h3 id="设置主机名和host映射"><a href="#设置主机名和host映射" class="headerlink" title="设置主机名和host映射"></a>设置主机名和host映射</h3><h4 id="设置主机名"><a href="#设置主机名" class="headerlink" title="设置主机名"></a>设置主机名</h4><p>1、为了方便记忆，可以给Linux系统设置主机名，也可以根据需求修改主机名<br>2、指令hostname，查看主机名<br>3、修改文件在/etc/hostname指定<br>4、修改后重启生效</p>
<h4 id="设置Host映射"><a href="#设置Host映射" class="headerlink" title="设置Host映射"></a>设置Host映射</h4><p>如何通过主机名能够找到（比如ping）某个linux系统？</p>
<p>Windows：<br>在C:\Windows\System32\drivers\etc\hosts 文件指定即可<br>案例：192.168.200.130 andu</p>
<p>Linux：<br>在/etc/hosts 文件指定<br>案例：192.168.200.1 ZhanShen</p>
<h2 id="Linux进程"><a href="#Linux进程" class="headerlink" title="Linux进程"></a>Linux进程</h2><p>1、在Linux中，每个执行的程序都称为一个进程。每一个进程都分配一个号（pid，进程号）。<br>2、每隔进程都可能以两种方式存在，前台与后台，所以前台进程就是用户目前的屏幕上可以进行该操作的。后台进程则是实际在操作，但由于屏幕上无法看到的进程，通常使用后台方式执行。<br>3、一般系统的服务都是在后台进程的方式存在，而且都会常驻在系统中。直到关机才结束。</p>
<h3 id="显示系统执行的进程"><a href="#显示系统执行的进程" class="headerlink" title="显示系统执行的进程"></a>显示系统执行的进程</h3><p>ps命令是用来查看目前系统中，有哪些正在执行，以及他们执行的情况。可以不加任何参数。</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>PID</td>
<td>进程识别号</td>
</tr>
<tr>
<td>TTY</td>
<td>终端名称</td>
</tr>
<tr>
<td>TIME</td>
<td>进程所消耗CPU时间</td>
</tr>
<tr>
<td>CMD</td>
<td>正在执行的命令或进程名</td>
</tr>
<tr>
<td>STAR</td>
<td>S-睡眠，s-表示进程绘画的先导进程，N-表示进程拥有比普通优先级更低的优先级，R-正在运行，D-短期等待，Z-僵死进程，T-被跟踪或者被停止等等。</td>
</tr>
<tr>
<td>USER</td>
<td>执行进程的用户</td>
</tr>
<tr>
<td>%CPU</td>
<td>进程占用CPU的百分比</td>
</tr>
<tr>
<td>%MEM</td>
<td>进程占用物理内存的百分比</td>
</tr>
<tr>
<td>VSZ</td>
<td>进程占用的虚拟内存大小（单位：KB）</td>
</tr>
<tr>
<td>RSS</td>
<td>进程占用的物理内存大小（单位：KB）</td>
</tr>
<tr>
<td>COMMAND</td>
<td>启动进程所用的命令和参数，如果过长会被截断显示</td>
</tr>
</tbody></table>
<p>ps -a：显示当前终端的所有进程信息<br>ps -u：以用户的格式显示进程信息<br>ps -x：显示后台进程运行的参数<br>组合使用：ps -aux</p>
<h3 id="显示系统执行的进程-1"><a href="#显示系统执行的进程-1" class="headerlink" title="显示系统执行的进程"></a>显示系统执行的进程</h3><p>以全格式显示当前所有的进程，查看进程的父进程<br>ps -ef是查看全格式显示当前所有的进程<br>-e显示所有进程 -f全格式<br>ps -ef | grep xxx 是BSD风格<br>UID：用户ID<br>PID：进程ID<br>PPID：父进程ID<br>C：CPU用于计算执行优先级的因子。数值越大，表示进程是CPU密集型运算，执行优先级会降低，数值越小，表示进程是I/O密集型运算，执行优先级会提高<br>STIME：进程启动的时间<br>TTY：完成的终端名称<br>TIME：CPU时间<br>CMD：启动进程所用的命令和参数</p>
<h3 id="终止进程kill和killall"><a href="#终止进程kill和killall" class="headerlink" title="终止进程kill和killall"></a>终止进程kill和killall</h3><p>若是某个进程执行一般需要停止时，或是已消了很大的系统资源时，此时可以考虑停止该进程，使用kill命令来完成此项任务。<br><strong>语法：</strong><br>kill [语法] 进程号（功能描述：通过进程号杀死/终止进程）<br>killall 进程名称（功能描述：通过进程名杀死进程，也支持通配符，这在系统因负载过大而变得很慢的时候很有用）<br><strong>常用选项：</strong><br>-9：表示强迫进程立即停止</p>
<p><strong>最佳实践：</strong><br>1、踢掉某个非法登录用户<br>比如我们此时有个非法用户andu，他此时已经通过ssh连接到了服务器，我们现在可以：<br>ps -aux | grep sshd<br>然后查看andu对应的进程PID，使用kill PID使andu强制下线<br>2、终止远程登录服务sshd，在适当的时候再次重启sshd服务<br>终止：kill sshd进程id  重启：/bin/systemctl start sshd.service<br>3、终止多个gedit<br>killall gedit<br>4、强制杀掉一个终端<br>ps -aux | grep bash<br>kill -9 bash进程id</p>
<h3 id="查看进程树"><a href="#查看进程树" class="headerlink" title="查看进程树"></a>查看进程树</h3><p>pstree [选项] 可以更加直观的查看进程信息<br>-p：显示进程PID<br>-u：显示进程的所属用户</p>
<h2 id="服务管理"><a href="#服务管理" class="headerlink" title="服务管理"></a>服务管理</h2><p>服务本质就是进程，但是是在运行在后台的，通常都会监听某个端口，等待其他程序的请求，比如（mysqld、sshd、防火墙）等等。<br><img src="https://cdn.nlark.com/yuque/0/2021/jpeg/12375174/1632471954323-314c90f8-2b9c-4799-8b3c-95ee4d57a74d.jpeg"></p>
<h3 id="服务管理指令"><a href="#服务管理指令" class="headerlink" title="服务管理指令"></a>服务管理指令</h3><p>1、service 服务名 [start | stop | restart | reload | status ]<br>2、在CentOS7.0之后 很多服务不在使用service而是systemctl<br>3、service指令管理的服务在/etc/init.d查看</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@andu01 ~]<span class="comment"># ls -l /etc/init.d/</span></span><br><span class="line">总用量 40</span><br><span class="line">-rw-r--r--. 1 root root 18281 5月  22 2020 <span class="built_in">functions</span></span><br><span class="line">-rwxr-xr-x. 1 root root  4569 5月  22 2020 netconsole</span><br><span class="line">-rwxr-xr-x. 1 root root  7928 5月  22 2020 network</span><br><span class="line">-rw-r--r--. 1 root root  1160 10月  2 2020 README</span><br></pre></td></tr></table></figure>
<p><strong>案例：</strong></p>
<p>使用service指令，查看，关闭，启动network [注意：在续集系统演示，因为网络连接会关闭]</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看服务状态</span></span><br><span class="line">service network status</span><br><span class="line">已配置设备：</span><br><span class="line">lo ens33</span><br><span class="line">当前活跃设备：</span><br><span class="line">lo ens33 virbr0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止服务</span></span><br><span class="line">service network stop</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动服务</span></span><br><span class="line">service network start</span><br></pre></td></tr></table></figure>
<p><strong>注意：关闭之后ssh就无法连接此服务器了，直到重启network服务</strong></p>
<h3 id="查看服务名"><a href="#查看服务名" class="headerlink" title="查看服务名"></a>查看服务名</h3><p><strong>方式一：使用setup就可以看到全部服务</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[ ] saslauthd.service                         ↑ │</span><br><span class="line">[*] smartd.service                            ▒ │</span><br><span class="line">[ ] speech-dispatcherd.service                ▒ │</span><br><span class="line">[*] sshd.service                              ▒ │</span><br><span class="line">[ ] sshd.socket                               ▒ │</span><br><span class="line">[ ] sssd-autofs.socket                        ▮ │</span><br><span class="line">[ ] sssd-nss.socket                           ▒ │</span><br><span class="line">[ ] sssd-pac.socket </span><br><span class="line"></span><br><span class="line"><span class="comment"># 前面带*号的就是随着Linux系统的启动而启动的服务</span></span><br><span class="line"><span class="comment"># 如果想修改 则需要把光标移动到星号位置 然后输入空格即可</span></span><br></pre></td></tr></table></figure>
<p><strong>方式二：/etc/init.d看到service命令管理的服务</strong></p>
<h3 id="服务的运行级别"><a href="#服务的运行级别" class="headerlink" title="服务的运行级别"></a>服务的运行级别</h3><p>Linux系统有7中运行级别（runlevel）<br>运行级别0：系统停机状态，系统默认运行级别不能设置为0，否则不能正常启动<br>运行级别1：单用户工作状态，root权限，用于系统维护，禁止远程登陆<br>运行级别2：多用户状态（没有NFS），不支持网络<br>运行级别3：完全的多用户 状态（有NFS），无界面，登录后进入控制台命令行模式<br>运行级别4：系统未使用，保留<br>运行级别5：X11控制台，登录后进入图形GUI模式<br>运行级别6：系统正常关闭并重启，默认运行级别不能设置为6，否则不能正常启动</p>
<p>一般比较经常使用的运行级别为3和5</p>
<p><strong>开启流程说明：</strong><br><img src="https://cdn.nlark.com/yuque/0/2021/jpeg/12375174/1632491059243-433f5cfc-8531-47cd-b01e-bde05bbb71c5.jpeg"><br><strong>CentOS7后运行级别说明</strong><br>在/etc/initab尽心简化，如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">multi-user.target: analogousto runlevel 3</span><br><span class="line">graphical.target: analogous to runlevel 5</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">// 获取运行级别</span><br><span class="line">systemctl get-default</span><br><span class="line">    </span><br><span class="line">// 设置运行级别</span><br><span class="line">systemctl set-default TARGET.target</span><br></pre></td></tr></table></figure>
<p><strong>chkconfig指令</strong><br>介绍<br>1、通过chkconfig命令可以给服务的各个运行级别设置自启动/关闭<br>2、chkconfig指令管理的服务在/etc/init.d查看<br>3、注意：CentOS7.0后，很多服务使用systemctl管理<br>基本语法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看服务</span></span><br><span class="line">chkconfig -- lsit [| grep xxx]</span><br><span class="line">chkconfig 服务名 --list</span><br><span class="line"><span class="comment"># 修改服务的自启动状态</span></span><br><span class="line">chkconfig --level 5 服务名 on/off</span><br></pre></td></tr></table></figure>
<p>对network服务修改运行级别为3并且关闭自启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --level 3 network off</span><br></pre></td></tr></table></figure>
<p>chkconfig重新设置服务和偶自启动或关闭，需要重启机器reboot生效</p>
<h3 id="systemctl服务管理"><a href="#systemctl服务管理" class="headerlink" title="systemctl服务管理"></a>systemctl服务管理</h3><p><strong>systemctl管理指令</strong><br>1、基本语法：<code>systemctl [start | stop | restart | status ]</code> 服务名<br>2、systemctl指令管理的服务在<code>/usr/lib/systemd/system</code>查看</p>
<p><strong>systemctl设置服务的自启动状态</strong><br>1、systemctl list-unit-files [ | grep 服务名] (查看服务开机启动在黄台，grep可以进行过滤)<br>2、systemctl enable 服务名（设置服务开机启动）<br>3、systemctl disable 服务名(关闭服务开机启动)<br>4、systemctl is-enabled 服务名(查询某个服务是否是自启动的)</p>
<p><strong>应用案例</strong><br>查看当前防火墙的状况，关闭防火墙和重启防火墙</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看防火墙服务的状态</span></span><br><span class="line">systemctl status firewalld</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭防火墙</span></span><br><span class="line">systemctl stop firewalld</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启防火墙</span></span><br><span class="line">systemctl restart firewalld</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看防火墙服务</span></span><br><span class="line">[root@andu01 /]<span class="comment"># ls -l /usr/lib/systemd/system | grep fire</span></span><br><span class="line">-rw-r--r--. 1 root root  657 10月  1 2020 firewalld.service</span><br><span class="line"></span><br><span class="line">[root@andu01 /]<span class="comment"># systemctl list-unit-files | grep firewalld</span></span><br><span class="line">firewalld.service                             enabled</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置服务开机启动</span></span><br><span class="line">systemctl <span class="built_in">enable</span> firewalld</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭服务开机自启</span></span><br><span class="line">systemctl disbale firewalld</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看防火墙是否开启启动</span></span><br><span class="line">systemctl -is-endabled firewalld</span><br></pre></td></tr></table></figure>

<p><strong>细节分析</strong><br>1、关闭或者启动防火墙后，立即生效。[telnet 测试 某个端口即可]<br>2、这种方式只是临时生效，当重启系统后，还是回归以前对服务的设置<br>3、如果希望设置某个服务自启动或关闭永久生效，要使用systemctl [enable | disable] 服务名.</p>
<h3 id="打开或者关闭指定端口"><a href="#打开或者关闭指定端口" class="headerlink" title="打开或者关闭指定端口"></a>打开或者关闭指定端口</h3><p>在真正的生产环境，往往需要将防火墙打开，但是问题来了，如果我们把防火墙打开，那么外部请求数据包就不能跟服务器见日你刚起端口通讯。这时，需要打开指定的端口。比如80、22、8080 等，这个又怎么做呢？</p>
<p><strong>firewall</strong><br>打开端口：<code>firewall-cmd --permanent --add-port=端口号/协议</code><br>关闭端口：<code>firewall-cmd --permanent --remove-port=端口号/协议</code><br>重新载入才能生效：<code>firewall-cmd --reload</code><br>查询端口是否开放：<code>firewall-cmd --query-port=端口/协议</code></p>
<p><strong>应用案例</strong><br>1、启动防火墙，测试111端口是否能telnet</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">telnet 192.168.234.130 111</span><br></pre></td></tr></table></figure>
<p>2、开放111端口</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --add-port=111/tcp</span><br></pre></td></tr></table></figure>
<p>3、再次关闭111端口</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --remove-port=111/tcp</span><br><span class="line"></span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<h3 id="动态监控进程"><a href="#动态监控进程" class="headerlink" title="动态监控进程"></a>动态监控进程</h3><p>top与ps指令相似，他们都用来显示正在执行的进程。top与ps最大的不同之处，在于top在执行一段时间可以更新更新正在运行的进程。<br><strong>基本语法</strong><br>top [选项]</p>
<p><strong>选项说明</strong></p>
<table>
<thead>
<tr>
<th>选项</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-d 秒数</td>
<td>指定top指令每隔几秒更新。默认是3秒</td>
</tr>
<tr>
<td>-i</td>
<td>使top不显示任何限制或者僵死进程</td>
</tr>
<tr>
<td>-p</td>
<td>通过指定监控进程ID来仅仅监控某个进程的状态</td>
</tr>
</tbody></table>
<p><strong>交互操作说明</strong></p>
<table>
<thead>
<tr>
<th>操作</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>P</td>
<td>以CPU使用率排序，默认就是此项</td>
</tr>
<tr>
<td>M</td>
<td>以内存的使用率排序</td>
</tr>
<tr>
<td>N</td>
<td>以PID排序</td>
</tr>
<tr>
<td>q</td>
<td>退出top</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">	  # 当前时间    # 系统运行时间     #用户数量  # 负载均衡        </span><br><span class="line">top - 09:<span class="number">27</span>:<span class="number">17</span> up <span class="number">21</span> days, <span class="number">11</span>:<span class="number">58</span>,  <span class="number">1</span> user,  load average: <span class="number">0.19</span>, <span class="number">0.18</span>, <span class="number">0.26</span></span><br><span class="line"># 任务数:总任务数   # <span class="number">3</span>个正在运行 #<span class="number">119</span>个正在等待  # <span class="number">0</span>个已停止            </span><br><span class="line">Tasks: <span class="number">123</span> total,   <span class="number">3</span> running, <span class="number">119</span> sleeping,   <span class="number">0</span> stopped,   <span class="number">1</span> zombie</span><br><span class="line"># CPU占用情况</span><br><span class="line">%Cpu(s):  <span class="number">7.2</span> us,  <span class="number">2.1</span> sy,  <span class="number">0.0</span> ni, <span class="number">90.8</span> id,  <span class="number">0.0</span> wa,  <span class="number">0.0</span> hi,  <span class="number">0.0</span> si,  <span class="number">0.0</span> st</span><br><span class="line">KiB Mem :  <span class="number">1882008</span> total,    <span class="number">85688</span> free,   <span class="number">784824</span> used,  <span class="number">1011496</span> buff/cache</span><br><span class="line">KiB Swap:  <span class="number">1049596</span> total,   <span class="number">838140</span> free,   <span class="number">211456</span> used.   <span class="number">900512</span> avail Mem</span><br></pre></td></tr></table></figure>
<p><strong>应用实例</strong><br>1、监视特定用户<br>top：输入此指令，按回车键，查看指定进程<br>u：然后输入”u”回车，在输入用户名，即可</p>
<p>2、终止指定的进程<br>top：输入此命令，按回车键，查看执行的进程<br>k：然后输入”k”回车，再输入要结束的进程ID号<br>在输入信号量为9(强制删除)</p>
<p>3、指定系统状态跟新的时间(跟新10秒自动更新)<br>top -d 10</p>
<h3 id="监控网络状态"><a href="#监控网络状态" class="headerlink" title="监控网络状态"></a>监控网络状态</h3><p>查看系统网路情况netstat<br><strong>基本语法</strong><br>netstat [选项]<br><strong>选项说明</strong><br>-an 按一定顺序排列输出<br>-p 选手显示哪个进程在调用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">网络协议            本地地址                远程地址                状态</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State</span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">6379</span>            <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:*               LISTEN</span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">80</span>              <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:*               LISTEN</span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">22</span>              <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:*               LISTEN</span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">8888</span>            <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:*               LISTEN</span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">888</span>             <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:*               LISTEN</span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">25</span>            <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:*               LISTEN</span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">443</span>             <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:*               LISTEN</span><br><span class="line">                    Linux的本地IP           使用MobaXterm远程连接机器的IP(本机IP)</span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">10.0</span><span class="number">.4</span><span class="number">.10</span>:<span class="number">22</span>            <span class="number">61.163</span><span class="number">.127</span><span class="number">.93</span>:<span class="number">22628</span>     ESTABLISHED</span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">10.0</span><span class="number">.4</span><span class="number">.10</span>:<span class="number">51356</span>         <span class="number">169.254</span><span class="number">.0</span><span class="number">.34</span>:<span class="number">9988</span>       ESTABLISHED</span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">10.0</span><span class="number">.4</span><span class="number">.10</span>:<span class="number">8888</span>          <span class="number">89.248</span><span class="number">.165</span><span class="number">.52</span>:<span class="number">51560</span>     ESTABLISHED</span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">10.0</span><span class="number">.4</span><span class="number">.10</span>:<span class="number">8888</span>          <span class="number">141.101</span><span class="number">.196</span><span class="number">.233</span>:<span class="number">43560</span>   ESTABLISHED</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>应用案例</strong><br>请查看服务名为sshd服务的信息<br>netstat -anp | grep sshd</p>
<h3 id="检测主机连接命令ping"><a href="#检测主机连接命令ping" class="headerlink" title="检测主机连接命令ping"></a>检测主机连接命令ping</h3><p>网络检测工具，它主要是用于检测远程主机是否正常，或者是两部主机之间的网线活着网卡故障。<br>ping 对方ip地址<br>ping 1.15.235.91</p>
<h2 id="包管理"><a href="#包管理" class="headerlink" title="包管理"></a>包管理</h2><h3 id="rpm"><a href="#rpm" class="headerlink" title="rpm"></a>rpm</h3><p>rpm用于互联网下载包的打包以及安装工具，它包含在某些Linux分发版中，它生成具有.RPM扩展名的文件。RPM是RedHat Package Manager（RedHat软件包管理工具）的缩写，类似鱼Windows的Setup.exe，这一文件格式名称虽然打上了RedHat的标志，但理念是通用的。<br>Linux的分发版本都有采用(suse,redhat,centos等等)，可以算是工人的行业标准了。</p>
<h4 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h4><p>查询已安装的rpm列表</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep xx</span><br></pre></td></tr></table></figure>
<p>查看当前系统是否安装了火狐</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep firefox</span><br></pre></td></tr></table></figure>
<p>rpm包基本格式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rpm包名：firefox-<span class="number">60.2</span><span class="number">.2</span>-<span class="number">1.</span>el7.centos.x86_64</span><br><span class="line">名称: <span class="number">60.2</span><span class="number">.21</span></span><br><span class="line">使用操作系统: el7.centos.x86_64</span><br><span class="line">表示centos7.x的<span class="number">64</span>位系统</span><br><span class="line">如果是i686、i386表示<span class="number">32</span>位系统，noarch表示通用</span><br></pre></td></tr></table></figure>

<p>查询所安装的所有rpm软件包<br>rpm -qa | more</p>
<p>查询软件包是否安装<br>rpm -q firefox</p>
<p>查询软件包信息<br>rpm -qi firefox</p>
<p>查询软件包中的文件<br>rpm -ql firfox</p>
<p>文件全路径名 查询文件所属的软件包<br>rpm -qf /etc/passwd<br>rpm -qf /root/install.log</p>
<h4 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h4><p>rpm -e RPM包的名称<br>删除firefox软件包<br>rpm -e firefox</p>
<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>rmp-ivh RPM包全路径名称</p>
<p>参数<br>i=install 安装<br>v=verbose 提示<br>h=hash 进度条</p>
<p>卸载和安装firefox浏览器</p>
<h3 id="yum"><a href="#yum" class="headerlink" title="yum"></a>yum</h3><p>yum是一个Shell前端软件包管理器，依赖于RPM包管理，能够从指定的服务器自动下载RPM并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软件包。</p>
<p>查询yum服务器是否有需要安装的软件ea<br>yum list | grep 软件列表</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="meta">@andu01</span> /]# yum list | grep firefox</span><br><span class="line">firefox.i686                                <span class="number">91.3</span><span class="number">.0</span>-<span class="number">1.</span>el7.centos        updates</span><br><span class="line">firefox.x86_64                              <span class="number">91.3</span><span class="number">.0</span>-<span class="number">1.</span>el7.centos        updates</span><br></pre></td></tr></table></figure>

<p>安装指定的yum包<br>yum install xxx</p>
<p>使用yum安装firefox</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install firefox</span><br></pre></td></tr></table></figure>


<h3 id="安装JDK"><a href="#安装JDK" class="headerlink" title="安装JDK"></a>安装JDK</h3><p>mkdir /opt/jdk<br>将JDK安装包通过XFTP6上传到/opt/jdk下<br>cd /opt/jdk<br>解压 tar -zxvf jdk-8u261-linux-x64.tar.gz<br>mkdir /usr/local/java<br>mv /opt/jdk/jdk1.8.0_261 /usr/local/kava<br>配置环境变量的配置文件vim /etc/profile<br>export JAVA_HOME=/usr/local/java/jdk1.8.0_261<br>export PATH=$JAVA_HOME/bin:$PATH<br>source /etc/profile 让新的环境变量生效<br>java -version</p>
<h3 id="tomcat安装"><a href="#tomcat安装" class="headerlink" title="tomcat安装"></a>tomcat安装</h3><p>下载安装包解压，运行startup.sh文件<br>并且需要开启8080端口</p>
<h3 id="idea安装"><a href="#idea安装" class="headerlink" title="idea安装"></a>idea安装</h3><p>下载安装包并解压<br>启动bin目录下的./idea.sh</p>
<h2 id="Shell编程"><a href="#Shell编程" class="headerlink" title="Shell编程"></a>Shell编程</h2><p>1、Linux运维工程师在进行服务器集群管理时，愮编写Shell程序来进行服务器的管理<br>2、对于JavaEE和Python程序员来说，可以编写一些Shell脚本进行程序活着是服务器的维护，比如编写一个定时备份数据库的脚本<br>3、对于大数据程序员来说，需要编写SHell程序来管理集群。</p>
<p><strong>Shell是什么？</strong><br>Shell是一个命令行解释器，他为用户u提供了一个向Linux内核发送请求以便运行程序的界面系统级程序，用户可以用Shell来启动、挂起、停止甚至是编写一些程序。</p>
<p><strong>Shell脚本的执行方式</strong><br>脚本格式要求<br>1、脚本以#<code>!/bin/bash</code>开头<br>2、脚本需要有可执行权限</p>
<p>脚本常用的执行方式<br>方式一(输入脚本的绝对路径或相对路径)：<br>首先要赋予helloworld.sh 脚本的+x权限，在执行脚本</p>
<p>方式二(sh + 脚本)<br>不用赋予脚本+x权限，直接执行即可</p>
<p>编写一个Shel脚本，输出Hello World</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mkdir shCode</span><br><span class="line">cd shCode</span><br><span class="line">vim hello.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">// i 输入内容</span></span><br><span class="line">#!/bin/bash</span><br><span class="line">echo <span class="string">&quot;Hello World&quot;</span></span><br><span class="line">    </span><br><span class="line">:wq 退出</span><br><span class="line">    </span><br><span class="line">chmod u+x hello.sh</span><br><span class="line"></span><br><span class="line">./hello.sh</span><br><span class="line">Hello World</span><br><span class="line"></span><br><span class="line">sh hello.sh</span><br><span class="line">Hello World</span><br></pre></td></tr></table></figure>

<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p><strong>变量介绍</strong><br>1、Linux Shell中的变量分为，系统变量和用户自定义变量<br>2、系统变量：<code>$HOME</code>、<code>$PWD</code>、<code>$SHELL</code>、<code>$USER</code>等等，比如：<code>echo $HOME</code>等等<br>3、显示当前shell中所有变量: set</p>
<p><strong>变量的定义</strong><br>1、定义变量：变量名 = 值<br>2、撤掉变量：unset 变量<br>3、声明静态变量：readonly 变量，注意：不能unset</p>
<p><strong>变量的定义规则</strong><br>1、变量名称可以由字母、数字和下划线组成，但是不能以数字开头<br>2、等号两侧不能有空格<br>3、变量名称一般习惯为大写</p>
<p>将命令的返回值赋值给变量<br>1、A=<code>date</code>反引号，运行里面的命令，并把结果返回给变量A<br>2、A=$(date)等价于反引号</p>
<p><strong>快速入门</strong><br>1、定义变量A</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">A=<span class="number">100</span></span><br><span class="line">echo A=$A</span><br><span class="line">eho <span class="string">&quot;A=$A&quot;</span></span><br><span class="line">    </span><br></pre></td></tr></table></figure>
<p>2、撤销变量A</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">unset $A</span><br><span class="line">echo <span class="string">&quot;A=$A&quot;</span> $ A=</span><br></pre></td></tr></table></figure>
<p>3、声明静态的变量B = 2，不能unset</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">readonly name=<span class="string">&quot;BJZ&quot;</span></span><br><span class="line">    </span><br><span class="line">[root<span class="meta">@andu01</span> shCode]# sh test.sh</span><br><span class="line">A=<span class="number">100</span></span><br><span class="line">A=<span class="number">100</span></span><br><span class="line">BJZ</span><br><span class="line">test.sh: 第 <span class="number">13</span> 行:unset: name: 无法反设定: 只读 variable</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>4、可以把变量提升为全局环境变量，可供其他shell程序使用</p>
<p><strong>设置环境变量</strong><br>1、export 变量名=变量值    将shell变量输出为边境变量/全局变量<br>2、source 配置文件        让修改后的配置信息立即生效<br>3、echo $变量名            查询环境变量的值</p>
<p>1、在<code>/etc/profile</code>文件中定义<code>TOMCAT_HOME</code>环境变量</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line"></span><br><span class="line"># 定义TOMCAT的变量变量</span><br><span class="line">export TOMCAT_HOME=/opt/tomcat</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 让配置生效</span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>
<p>2、查看环境变量<code>TOMCAT_HOME</code>的值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $TOMCAT_HOME</span><br></pre></td></tr></table></figure>

<p>3、在另外一个shell程序中使用<code>TOMCAT_HOME</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo tomcat_home=$TOMCAT_HOME</span><br></pre></td></tr></table></figure>

<p>注意：在输入<code>TOMCAT_HOME</code>环境变量前，需要让其生效<code>source /etc/profile</code></p>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p><strong>单行注释</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># 单行注释</span><br></pre></td></tr></table></figure>
<p><strong>多行注释</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">:&lt;&lt;! 多行注释</span><br><span class="line"></span><br><span class="line">多行注释</span><br><span class="line">多行注释</span><br><span class="line">多行注释</span><br><span class="line">!</span><br></pre></td></tr></table></figure>


<h3 id="位置参数变量"><a href="#位置参数变量" class="headerlink" title="位置参数变量"></a>位置参数变量</h3><p>当我们执行一个shell脚本时，如果希望获取到命令行的参数信息，就可以使用到位置参数变量<br>比如：<code>./myshell.sh 100 200</code> ，这个就是一个执行shell的命令行，可以在myshell脚本中获取到参数信息</p>
<p><strong>基本语法</strong><br>$n（n为数字，$0代表命令本身，$1-$9代表第一到第九个参数，十以上的参数，十以上的参数需要用大括号包含，如${10}）<br>$*（这个变量代表命令行中的所有参数，$*把所有的参数看成一个整体）<br>$@（这个变量也代表命令行中的所有参数，不过$@把每个参数区分对待）<br>$#（这个变代替命令行中所有参数的个数）</p>
<p>编写一个shell脚本 position.sh ，在脚本中获取到命令行的各个参数信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建脚本文件</span></span><br><span class="line">vim position.sh</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 写入内容</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;0=<span class="variable">$0</span> 1=<span class="variable">$1</span> 2=<span class="variable">$2</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;所有的参数=$*&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> “<span class="variable">$@</span>”</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;个数=<span class="variable">$#</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 赋予权限</span></span><br><span class="line"><span class="built_in">chmod</span> 777 position.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行脚本</span></span><br><span class="line">./position.sh 100 200</span><br><span class="line">0=./position.sh 1=100 2=200</span><br><span class="line">所有的参数=100 200</span><br><span class="line">“100 200”</span><br><span class="line">个数=2</span><br></pre></td></tr></table></figure>
<h3 id=""><a href="#" class="headerlink" title=""></a></h3><h3 id="预定义变量"><a href="#预定义变量" class="headerlink" title="预定义变量"></a>预定义变量</h3><p><strong>基本介绍</strong><br>就是shell设计者实现已经定义好的变量，可以直接在shell脚本中使用</p>
<p><strong>基本语法</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$$	当前进程的进程号(PID)</span><br><span class="line">$!	后台运行的最后一个进程的进程号(PID)</span><br><span class="line">$?	最后一次执行的命令的返回状态，如果这个变量的值为0，证明上一个命令正确执行，如果这个变量的值为非0(具体时候哪个数，由命令自己来决定)，则证明上一个命令执行不正确了</span><br></pre></td></tr></table></figure>

<p><strong>应用实例</strong><br>在一个shell脚本中简单使用一些预定义变量<br>preVar.sh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;当前执行的进程ID =&gt; $$&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/shCode/test.sh &amp;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;最后一个后台方式运行的进程ID =&gt; $! &quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;执行的结果是=$?&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@andu01 shCode]<span class="comment"># ./preVar.sh</span></span><br><span class="line">当前执行的进程ID =&gt; 43261</span><br><span class="line">最后一个后台方式运行的进程ID =&gt; 43262</span><br><span class="line">执行的结果是=0</span><br><span class="line">[root@andu01 shCode]<span class="comment"># A=100</span></span><br><span class="line">A=100</span><br><span class="line">BJZ</span><br><span class="line">/shCode/test.sh: 第 13 行:<span class="built_in">unset</span>: name: 无法反设定: 只读 variable</span><br></pre></td></tr></table></figure>

<h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><p>基本语法<br>1、<code>&quot;$((运算式))&quot;</code>或<code>&quot;$[运算式]&quot;</code>活着<code>expr m + n</code><br>2、注意expr运算符间要有空格，如果希望将expr的结果赋给某个变量，使用``<br>3、<code>expr m - n</code><br>4、<code>expr \*，/，%</code>    乘，除，取余</p>
<p>应用案例<br>1、计算<code>(2 + 3) * 4</code>的值</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一种方式</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">RES1=$(((<span class="number">2</span>+<span class="number">3</span>)*<span class="number">4</span>))</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;RES1 = &quot;</span><span class="variable">$RES1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@BJZ home]<span class="comment"># chmod u+x oper.sh</span></span><br><span class="line">[root@BJZ home]<span class="comment"># ./oper.sh</span></span><br><span class="line">RES1 = 20</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二种方式</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">RES2=$[(2+3)*4]</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;RES2 = &quot;</span><span class="variable">$RES2</span></span><br><span class="line"></span><br><span class="line">[root@BJZ home]<span class="comment"># chmod u+x oper2.sh</span></span><br><span class="line">[root@BJZ home]<span class="comment"># ./oper2.sh</span></span><br><span class="line">RES2 = 20</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第三种方式</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">RES3=`<span class="built_in">expr</span> 2 + 3`</span><br><span class="line">RES4=`<span class="built_in">expr</span> <span class="variable">$RES3</span> \* 4`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;RES4&quot;</span><span class="variable">$RES4</span></span><br><span class="line"></span><br><span class="line">[root@BJZ home]<span class="comment"># chmod u+x oper3.sh</span></span><br><span class="line">[root@BJZ home]<span class="comment"># ./oper3.sh</span></span><br><span class="line">RES420</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>2、求出命令行的两个参数[整数]的和</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">SUM=$[<span class="variable">$1</span>+<span class="variable">$2</span>]</span><br><span class="line"><span class="built_in">echo</span> SUM<span class="variable">$SUM</span></span><br><span class="line"></span><br><span class="line">[root@BJZ home]<span class="comment"># chmod u+x oper4.sh</span></span><br><span class="line">[root@BJZ home]<span class="comment"># ./oper4.sh 20 30</span></span><br><span class="line">SUM50</span><br></pre></td></tr></table></figure>
<h3 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h3><p>基本语法<br><a href="%E6%B3%A8%E6%84%8Fcondition%E5%89%8D%E5%90%8E%E8%A6%81%E6%9C%89%E7%A9%BA%E6%A0%BC">condition</a><br>非空返回true，可使用$?验证(0为true &gt;1为false)</p>
<p>应用案例<br><strong>判断语句</strong><br>1、=字符串比较<br>2、两个整数的比较<br>-lt    小于<br>-le    小于等于<br>-eq    等于<br>-gt    大于<br>-ge    大于等于<br>-ne    不等于<br>3、按照文件权限进行判断<br>-r    有读的权限<br>-w    有写的权限<br>-x    有执行的权限<br>4、按照文件类型进行判断<br>-f    文件存在并且是一个常规的文件<br>-e    文件存在<br>-d    文件存在并且是一个目录</p>
<p><strong>应用实例</strong><br>1、”ok”是否等于”ok”</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;ok&quot;</span> = <span class="string">&quot;ok&quot;</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;equal&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>2、23是否大于等于22</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ 23 -ge 22 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;大于&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>3、<code>/root/shcode/aaa.txt</code>目录中的文件是否存在</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -f /root/shcode/aaa.txt ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;文件存在&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h3 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ 条件表达式 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">代码</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者多分支</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ 添加表达式 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">代码</span><br><span class="line"><span class="keyword">elif</span> [ 条件表达式 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">代码</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>注意：[ 条件表达式 ] 中括号和条件判断式之间必须要有空格</p>
<p>请编写一个shell程序，如果输入的参数大于等于60，则输出”及格了”，如果小于60，则输出”不及格”</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$1</span> -ge 60 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;及格了&quot;</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$1</span> -lt 60 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;不及格&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">[root@BJZ home]<span class="comment"># chmod u+x ifdemo2.sh</span></span><br><span class="line">[root@BJZ home]<span class="comment"># ./ifdemo2.sh 20</span></span><br><span class="line">不及格</span><br><span class="line">[root@BJZ home]<span class="comment"># ./ifdemo2.sh 70</span></span><br><span class="line">及格了</span><br></pre></td></tr></table></figure>

<p><strong>case语句</strong></p>
<p>基本语法<br>case $变量名 in<br>“值1”)<br>如果变量的值等于1，则执行程序1<br>;;<br>“值2”)<br>如果变量的值等于2，则执行程序2<br>;;<br>…省略其他分支…<br>*)<br>如果变量的值都不是以上的值，则执行此程序<br>;;<br>esac</p>
<p>当命令行参数是1时，输出”周一”，是2时输出”周二“，其他情况输出”other”</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line"><span class="string">&quot;1&quot;</span>)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;周一&quot;</span></span><br><span class="line">;;</span><br><span class="line"><span class="string">&quot;2&quot;</span>)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;周二&quot;</span></span><br><span class="line">;;</span><br><span class="line">*)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;other&quot;</span></span><br><span class="line">;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"></span><br><span class="line">[root@BJZ home]<span class="comment"># chmod u+x ifcase.sh</span></span><br><span class="line">[root@BJZ home]<span class="comment"># ./ifcase.sh 2</span></span><br><span class="line">周二</span><br><span class="line">[root@BJZ home]<span class="comment"># ./ifcase.sh 1</span></span><br><span class="line">周一</span><br><span class="line">[root@BJZ home]<span class="comment"># ./ifcase.sh 5</span></span><br><span class="line">other</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="循环控制"><a href="#循环控制" class="headerlink" title="循环控制"></a>循环控制</h3><p>基本语法<br>for 变量 in 值1 值2 值3…<br>do<br>程序<br>done<br>应用实例<br>打印命令行输入的参数[这里可以看出$*和$@的区别]</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># $*</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&quot;$*&quot;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;num is <span class="variable">$i</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">[root@BJZ home]<span class="comment"># ./testfor1.sh 100 200 300</span></span><br><span class="line">num is 100 200 300</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># $@</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;num is <span class="variable">$i</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">[root@BJZ home]<span class="comment"># ./testfor1.sh 100 200 300</span></span><br><span class="line">num is 100</span><br><span class="line">num is 200</span><br><span class="line">num is 300</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>基本语法2<br>for((初始值;循环控制条件;变量变化++))<br>do<br>程序<br>done<br>应用案例<br>从1加到100的值输出显示</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">SUM=0</span><br><span class="line"><span class="keyword">for</span>((i=1;i &lt;= 100;i++))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        SUM=$[<span class="variable">$SUM</span>+<span class="variable">$i</span>]</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;SUM=<span class="variable">$SUM</span>&quot;</span></span><br><span class="line"></span><br><span class="line">[root@BJZ home]<span class="comment"># ./testfor2.sh</span></span><br><span class="line">SUM=5050</span><br></pre></td></tr></table></figure>
<p><strong>while循环</strong><br>基本语法1<br>while [ 条件判断式 ]<br>do<br>程序<br>done<br>应用案例<br>从命令行输入一个数n，统计1+..+n的值式多少</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">SUM=0</span><br><span class="line">i=0</span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$i</span> -le <span class="variable">$1</span> ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        SUM=$[<span class="variable">$SUM</span>+<span class="variable">$i</span>]</span><br><span class="line">        <span class="comment"># i自增</span></span><br><span class="line">        i=$[<span class="variable">$i</span>+1]</span><br><span class="line"></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;执行结果 = &quot;</span><span class="variable">$SUM</span></span><br><span class="line"></span><br><span class="line">[root@BJZ home]<span class="comment"># vim testwhile.sh</span></span><br><span class="line">[root@BJZ home]<span class="comment"># ./testwhile.sh 10</span></span><br><span class="line">执行结果 = 55</span><br><span class="line">[root@BJZ home]<span class="comment"># ./testwhile.sh 100</span></span><br><span class="line">执行结果 = 5050</span><br></pre></td></tr></table></figure>

<h3 id="读取控制台输入"><a href="#读取控制台输入" class="headerlink" title="读取控制台输入"></a>读取控制台输入</h3><p>基本语法<br>read(选项)(参数)<br>选项：<br>-p：指定读取值时的提示符<br>-t：指定读取值时等待的时间(秒)，如果没有在指定的时间内输入，就不再等待了。<br>参数：<br>变量：指定读取值的变量名</p>
<p>应用案例<br>1、读取控制台输入一个num1的值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">read -p <span class="string">&quot;请输入一个数NUM1=&quot;</span> NUM1</span><br><span class="line">echo <span class="string">&quot;你输入的NUM1=$NUM1&quot;</span></span><br><span class="line"></span><br><span class="line">[root<span class="meta">@BJZ</span> home]# chmod u+x testread.sh</span><br><span class="line">[root<span class="meta">@BJZ</span> home]# ./testread.sh</span><br><span class="line">请输入一个数NUM1=<span class="number">200</span></span><br><span class="line">你输入的NUM1=<span class="number">200</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>2、读取控制台输入一个num2值，在10秒内输入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">read -t <span class="number">10</span> -p <span class="string">&quot;请输入一个数NUM2=&quot;</span> NUM2</span><br><span class="line">echo <span class="string">&quot;你输入的NUM2=$NUM2&quot;</span></span><br><span class="line">    </span><br><span class="line"># 不输入任何字符等待<span class="number">10</span>秒会自动退出</span><br><span class="line">[root<span class="meta">@BJZ</span> home]# ./testread.sh</span><br><span class="line">请输入一个数NUM2=你输入的NUM2=</span><br><span class="line">    </span><br><span class="line">[root<span class="meta">@BJZ</span> home]# ./testread.sh</span><br><span class="line">请输入一个数NUM2=<span class="number">123</span></span><br><span class="line">你输入的NUM2=<span class="number">123</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</div><div class="article-licensing box"><div class="licensing-title"><p>Linux笔记</p><p><a href="https://xiaoyes.cn/post/2022-05-01-linux/">https://xiaoyes.cn/post/2022-05-01-linux/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>路远</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2022-05-01</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2023-04-21</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Linux/">Linux</a></div><div class="sharethis-inline-share-buttons"></div><script src="http://xiaoyes.cn" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/ali.png" alt="支付宝"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/wx.png" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/post/2022-05-01-wallhaven/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Python批量爬取Wallhaven壁纸到本地</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/post/2022-05-01-python-request/"><span class="level-item">Python模拟Http请求</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/avatar.png" alt="路远"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">路远</p><p class="is-size-6 is-block">Hello World</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>China HangZhou</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">12</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">5</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">10</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/luyuan2002" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/luyuan2002"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="CSDN" href="https://blog.csdn.net/qq_39520157"><i class="fa fa-coffee"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com/BPDBSIR"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="JueJin" href="https://juejin.cn/user/1662117314045326"><i class="fa fa-bug"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Apache/"><span class="level-start"><span class="level-item">Apache</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Git/"><span class="level-start"><span class="level-item">Git</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Java/"><span class="level-start"><span class="level-item">Java</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2022/09/"><span class="level-start"><span class="level-item">九月 2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/08/"><span class="level-start"><span class="level-item">八月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">五月 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-09-10T16:00:00.000Z">2022-09-11</time></p><p class="title"><a href="/post/Vue+Apache%E4%BA%8C%E7%BA%A7%E7%9B%AE%E5%BD%95%E9%85%8D%E7%BD%AE/">Vue + Apache二级目录配置</a></p><p class="categories"><a href="/categories/Apache/">Apache</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-09-03T16:00:00.000Z">2022-09-04</time></p><p class="title"><a href="/post/2022-09-04-git-command/">Git常用命令合集</a></p><p class="categories"><a href="/categories/Git/">Git</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-09-03T16:00:00.000Z">2022-09-04</time></p><p class="title"><a href="/post/2022-09-04-git-proxy/">Git设置代理</a></p><p class="categories"><a href="/categories/Git/">Git</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-08-31T16:00:00.000Z">2022-09-01</time></p><p class="title"><a href="/post/2022-09-01-git-commit/">Git commit提交规范</a></p><p class="categories"><a href="/categories/Git/">Git</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-08-17T16:00:00.000Z">2022-08-18</time></p><p class="title"><a href="/post/2022-08-18-linux-dns/">CentOS无法解析域名问题</a></p><p class="categories"><a href="/categories/Linux/">Linux</a></p></div></article></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="http://guoxiaorui.cn" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">程序猿郭小睿</span></span><span class="level-right"><span class="level-item tag">guoxiaorui.cn</span></span></a></li><li><a class="level is-mobile" href="https://www.cnblogs.com/selisen/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">开心小市民</span></span><span class="level-right"><span class="level-item tag">www.cnblogs.com</span></span></a></li><li><a class="level is-mobile" href="http://luoyaning.cn/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">小窝</span></span><span class="level-right"><span class="level-item tag">luoyaning.cn</span></span></a></li><li><a class="level is-mobile" href="https://www.lifezb.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">聆风导航</span></span><span class="level-right"><span class="level-item tag">www.lifezb.com</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Apache/"><span class="tag">Apache</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CURL/"><span class="tag">CURL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DNS/"><span class="tag">DNS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Git/"><span class="tag">Git</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java/"><span class="tag">Java</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Jsoup/"><span class="tag">Jsoup</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ddos/"><span class="tag">ddos</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%88%AC%E8%99%AB/"><span class="tag">爬虫</span><span class="tag">3</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="路远" height="28"></a><p class="is-size-7"><span>&copy; 2023 路远</span>  <a href="https://beian.miit.gov.cn" target="_blank" rel="noopener">豫ICP备19009879号-1</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>